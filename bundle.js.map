{"version":3,"sources":["webpack:///webpack/bootstrap 59542d9599fe85a84bee","webpack:///./main.js","webpack:///./js/draw_grid.js","webpack:///./js/expand_mandlebrot.js","webpack:///./js/draw_mandlebrot.js","webpack:///./js/color_picker.js","webpack:///./js/jscolor.js","webpack:///./js/set_colors.js"],"names":["STARTER_COLORS","MAX_ITERATIONS","document","addEventListener","fractalCanvas","getElementById","gridCanvas","gridCtx","getContext","centerR","centerI","center","r","i","scale","showGridButton","onclick","innerHTML","style","visibility","real","imaginary","updateCenterDisplay","toFixed","currentZoomDisplay","viewPort","maxIterations","onchange","e","target","value","slideFactor","slideLeft","slideRight","slideUp","slideDown","recenter","left","right","up","down","recenterButton","zoomFactor","zoomIn","zoomOut","resetZoom","zoom","zoomReset","zoomBack","onkeydown","preventDefault","keyCode","drawGrid","ctx","clearRect","strokeStyle","moveTo","lineTo","stroke","font","p","fillText","expandMandlebrot","max","incsCount","magnitude","Math","sqrt","newReal","drawMandlebrot","canvas","colorsObj","width","height","imgData","getImageData","cutoffs","Object","keys","j","data","length","x","y","incsToEscape","k","putImageData","setupColorPicker","colorPicker","addColorButton","createElement","appendChild","addColorForm","colorsList","onsubmit","color","rgb","backgroundColor","match","newLi","reduce","a","b","parseInt","firstLi","childNodes","insertBefore","handleAddColorClick","window","jscolor","jsc","register","attachDOMReadyEvent","init","attachEvent","onDocumentMouseDown","onDocumentTouchStart","onWindowResize","lookupClass","installByClassName","tryInstallOnElements","elms","className","matchClass","RegExp","type","undefined","toLowerCase","isColorAttrSupported","m","targetElm","optsStr","dataOptions","getDataAttr","opts","Function","eParseError","warn","elm","setAttribute","isCanvasSupported","fetchElement","mixed","isElementType","nodeName","el","name","attrName","attrValue","getAttribute","evnt","func","detachEvent","removeEventListener","_attachedGroupEvents","attachGroupEvent","groupName","hasOwnProperty","push","detachGroupEvents","evt","fired","fireOnce","readyState","setTimeout","arguments","callee","documentElement","doScroll","top","tryScroll","body","msg","console","returnValue","captureTarget","setCapture","_capturedTarget","releaseTarget","releaseCapture","fireEvent","createEvent","ev","initEvent","dispatchEvent","createEventObject","classNameToList","replace","split","hasClass","indexOf","setClass","classList","unsetClass","repl","getStyle","getComputedStyle","currentStyle","setStyle","helper","getSupportedProp","names","props","borderRadius","boxShadow","prop","alphaOpacity","round","parseFloat","opacity","filter","setBorderRadius","setBoxShadow","getElementPos","relativeToViewport","rect","getBoundingClientRect","viewPos","getViewPos","getElementSize","offsetWidth","offsetHeight","getAbsPointerPos","event","changedTouches","clientX","clientY","getRelPointerPos","srcElement","targetRect","doc","pageXOffset","scrollLeft","clientLeft","pageYOffset","scrollTop","clientTop","getViewSize","innerWidth","clientWidth","innerHeight","clientHeight","redrawPosition","picker","owner","thisObj","tp","vp","fixed","targetElement","ts","vs","ps","getPickerOuterDims","c","position","l","smartPosition","pp","positionValue","contractShadow","_drawPosition","vShadow","shadowBlur","wrap","boxS","shadow","BoxShadow","shadowColor","getPickerDims","displaySlider","getSliderComponent","dims","insetWidth","padding","getPadToSliderPadding","sliderSize","closable","buttonHeight","borderWidth","pointerBorderWidth","pointerThickness","getPadYComponent","mode","charAt","_jscLinkedInstance","showOnClick","show","_jscControlName","onControlPointerStart","hide","onParentScroll","_pointerMoveEvent","mouse","touch","_pointerEndEvent","_pointerOrigin","controlName","pointerType","_jscInstance","registerDragEvents","offset","onDocumentPointerMove","onDocumentPointerEnd","parent","frameElement","ofs","abs","rel","hsv","fromHSV","setPad","setSld","dispatchFineChange","dispatchChange","valueElement","onFineChange","callback","call","ofsX","ofsY","pointerAbs","xVal","yVal","leaveSld","leavePad","_vmlNS","_vmlCSS","_vmlReady","initVML","namespaces","add","styleSheets","tags","ss","createStyleSheet","owningElement","id","addRule","createPalette","paletteObj","draw","drawFunc","hGrad","createLinearGradient","addColorStop","fillStyle","fillRect","vGrad","vmlContainer","overflow","method","angle","colors","hRect","stroked","vRect","color2","createSliderGradient","sliderObj","color1","grad","leaveValue","leaveStyle","hShadow","blur","spread","inset","prototype","toString","vals","join","options","styleElement","required","refine","hash","uppercase","activeClass","minS","maxS","minV","maxV","crossSize","closeText","buttonColor","borderColor","insetColor","pointerColor","pointerBorderColor","zIndex","container","opt","isPickerOwner","detachPicker","drawPicker","redraw","importColor","exportColor","fromString","backgroundImage","_jscOrigStyle","test","flags","toUpperCase","isLight","redrawPad","redrawSld","h","s","v","isNaN","min","HSV_RGB","fromRGB","g","RGB_HSV","str","substr","params","re","mR","mG","mB","toHEXString","toRGBString","_processParentElementsInDOM","_linkedElementsProcessed","currStyle","_jscEventsAttached","parentNode","n","u","floor","f","THIS","removeChild","box","boxB","pad","padB","padM","padPal","cross","crossBY","crossBX","crossLY","crossLX","sld","sldB","sldM","sldGrad","sldPtrS","sldPtrIB","sldPtrMB","sldPtrOB","btn","btnT","crossOuterSize","padToSliderPadding","PI","padCursor","clear","border","background","cursor","display","sliderPtrSpace","setBtnBorder","insetColors","outsetColor","bottom","textAlign","eOldIE","onmousedown","lineHeight","createTextNode","yComponent","rgb1","rgb2","sldComponent","blurValue","getElementsByTagName","origCallback","updateField","inputElms","buttonElms","setColors","newColorsObj","currentSum","slice","forEach","incs","rgbStrings","rgbInts","idx","log"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 59542d9599fe85a84bee","import drawGrid from './js/draw_grid.js';\n\nimport expandMandlebrot from './js/expand_mandlebrot';\n\nimport drawMandlebrot from './js/draw_mandlebrot';\n\nimport setupColorPicker from './js/color_picker';\n\nimport setColors from './js/set_colors';\n\nconst STARTER_COLORS =  { 2: [0, 0, 0], 10: [255, 0, 0],\n                                          100: [0, 0, 255],\n                                          250: [0, 255, 255],\n                                          500: [255, 255, 255] };\n\nlet MAX_ITERATIONS = 500;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const fractalCanvas = document.getElementById('fractal');\n  const gridCanvas = document.getElementById('grid');\n\n  const gridCtx = gridCanvas.getContext(\"2d\");\n  // const fractalCtx = fractalCanvas.getContext(\"2d\");\n\n  //set center\n  let centerR = 0;\n  let centerI = 0;\n\n  //set complex center\n\n  const center = {r: centerR, i: centerI};\n\n  //Set initial scale\n  let scale = 2;\n\n  drawGrid(gridCtx, center, scale);\n  drawMandlebrot(fractalCanvas,\n                  { center, scale },\n                  STARTER_COLORS,\n                  MAX_ITERATIONS);\n\n  //Button to Show  and hide Grid\n  const showGridButton = document.getElementById('grid-on-off');\n  showGridButton.onclick = () => {\n    if(showGridButton.innerHTML === 'hide grid') {\n      showGridButton.innerHTML = 'show grid';\n      gridCanvas.style.visibility = 'hidden';\n    } else {\n      showGridButton.innerHTML = 'hide grid';\n      drawGrid(gridCtx, center, scale);\n      gridCanvas.style.visibility = 'visible';\n    }\n  };\n\n  const real = document.getElementById('real');\n  const imaginary = document.getElementById('imaginary');\n\n  const updateCenterDisplay = () => {\n    real.innerHTML = center.r.toFixed(3);\n    imaginary.innerHTML = `${center.i.toFixed(3)}i`;\n    currentZoomDisplay.innerHTML = `${(3 / scale).toFixed(3)} x`;\n    drawGrid(gridCtx, center, scale);\n    const viewPort = { scale, center };\n    // console.log(`current max iterations = ${MAX_ITERATIONS}`);\n    drawMandlebrot(fractalCanvas,\n                    viewPort,\n                    setColors(MAX_ITERATIONS),\n                    MAX_ITERATIONS);\n  };\n\n  const maxIterations = document.getElementById('max-iterations');\n  maxIterations.onchange = (e) => {\n    MAX_ITERATIONS = e.target.value;\n  };\n\n  const slideFactor = (1 / 8);\n\n  const slideLeft = () => {\n    center.r -= (scale * slideFactor);\n    updateCenterDisplay();\n  };\n\n  const slideRight = () => {\n    center.r += (scale * slideFactor);\n    updateCenterDisplay();\n  };\n\n  const slideUp = () => {\n    center.i -= (scale * slideFactor);\n    updateCenterDisplay();\n  };\n\n  const slideDown = () => {\n    center.i += (scale * slideFactor);\n    updateCenterDisplay();\n  };\n\n  const recenter = () => {\n    center.i = 0;\n    center.r = 0;\n    updateCenterDisplay();\n  };\n\n  const left = document.getElementById('slide-left');\n  left.onclick = slideLeft;\n\n  const right = document.getElementById('slide-right');\n  right.onclick = slideRight;\n\n  const up = document.getElementById('slide-up');\n  up.onclick = slideUp;\n\n  const down = document.getElementById('slide-down');\n  down.onclick = slideDown;\n\n  const recenterButton = document.getElementById('recenter');\n  recenterButton.onclick = recenter;\n\n  //zoom controls\n  const zoomFactor = 3/2;\n\n  const currentZoomDisplay = document.getElementById('zoom-factor');\n\n  const zoomIn = () => {\n    scale /= zoomFactor;\n    updateCenterDisplay();\n  };\n\n  const zoomOut = () => {\n    scale *= zoomFactor;\n    updateCenterDisplay();\n  };\n\n  const resetZoom = () => {\n    scale = 2;\n    updateCenterDisplay();\n  };\n\n  // $('li').append(\"<input type='color' />\");\n  setupColorPicker();\n\n  const zoom = document.getElementById('in');\n  zoom.onclick = zoomIn;\n\n  const zoomReset = document.getElementById('reset-zoom');\n  zoomReset.onclick = resetZoom;\n\n  const zoomBack = document.getElementById('out');\n  zoomBack.onclick = zoomOut;\n\n  // Key binding for slide and zoom actions\n  document.onkeydown= (e) => {\n    e.preventDefault();\n    switch (e.keyCode) {\n      case 39:\n        slideLeft();\n        break;\n      case 38:\n        slideUp();\n        break;\n      case 37:\n        slideRight();\n        break;\n      case 40:\n        slideDown();\n        break;\n      case 90:\n        zoomIn();\n        break;\n      case 88:\n        zoomOut();\n        break;\n      case 82:\n        resetZoom();\n        break;\n    }\n  };\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./main.js","const drawGrid = (ctx, center, scale) => {\n  // start by clearing the grid and setting the stroke style\n  ctx.clearRect(0,0,500,500);\n  ctx.strokeStyle = \"#222\";\n\n  //horizontal lines\n  ctx.moveTo(35, 125);\n  ctx.lineTo(500,125);\n  ctx.stroke();\n\n  ctx.moveTo(35, 250);\n  ctx.lineTo(500,250);\n  ctx.stroke();\n\n  ctx.moveTo(35, 375);\n  ctx.lineTo(500,375);\n  ctx.stroke();\n\n  //vertical lines\n  ctx.moveTo(125, 20);\n  ctx.lineTo(125, 500);\n  ctx.stroke();\n\n  ctx.moveTo(250, 20);\n  ctx.lineTo(250, 500);\n  ctx.stroke();\n\n  ctx.moveTo(375, 20);\n  ctx.lineTo(375, 500);\n  ctx.stroke();\n\n  // Add number marking\n  ctx.font = \"18px Scada Sans-serif\";\n\n  //set numbers based on scale and center\n  const p = 2; // p for 'precision'\n\n  ctx.fillText(`${(center.i + scale/2).toFixed(p)}i`, 3, 125 );\n  ctx.fillText(`${(center.i).toFixed(p)}i`, 3, 250 );\n  ctx.fillText(`${(center.i - scale/2).toFixed(p)}i`, 3, 375 );\n  ctx.fillText(`${(center.r - scale/2).toFixed(p)}`, 110, 15 );\n  ctx.fillText(`${(center.r).toFixed(p)}`, 235, 15 );\n  ctx.fillText(`${(center.r + scale/2).toFixed(p)}`, 360, 15 );\n\n};\n\nexport default drawGrid;\n\n\n\n// WEBPACK FOOTER //\n// ./js/draw_grid.js","const expandMandlebrot = (real, imaginary, max) => {\n  let incsCount = 0;\n  let r = real;\n  let i = imaginary;\n  let magnitude = Math.sqrt(real * real + imaginary * imaginary);\n  let newReal = 0;\n  while(magnitude < 4.0) {\n    ++incsCount;\n    if(incsCount > max) { return -1; }\n    newReal = r * r - i * i + real;\n    i = r * i * 2 + imaginary;\n    r = newReal;\n    magnitude = Math.sqrt(r * r + i * i);\n  }\n  return incsCount;\n};\n\nexport default expandMandlebrot;\n\n\n\n// WEBPACK FOOTER //\n// ./js/expand_mandlebrot.js","import expandMandlebrot from './expand_mandlebrot';\n\nconst drawMandlebrot = (canvas, viewPort, colorsObj, max) => {\n  const ctx = canvas.getContext('2d');\n  const width = canvas.width;\n  const height = canvas.height;\n  const imgData = ctx.getImageData(0, 0, width, height);\n  const cutoffs = Object.keys(colorsObj);\n  const centerR = viewPort.center.r;\n  const centerI = viewPort.center.i;\n  const scale = viewPort.scale;\n\n  // loop over pixels on canvas, mapping each pixel to a Complex numbers\n  // move by 4s because each pixel has 4 values for R, G, B and Alpha\n  for(let j = 0; j < imgData.data.length; j += 4) {\n    const x = (j / 4) % width;\n    const y = ((j / 4) - x)/ width;\n\n    const r = (centerR - scale) + (x / width) * 2 * scale;\n    const i = (centerI + scale) - (y / width) * 2 * scale;\n\n    const incsToEscape = expandMandlebrot(r, i, max);\n\n    for(let k = 0; k < cutoffs.length; k++) {\n      if (incsToEscape < cutoffs[k]) {\n        imgData.data[j] = colorsObj[cutoffs[k]][0]; //red channel\n        imgData.data[j + 1] = colorsObj[cutoffs[k]][1]; //green channel\n        imgData.data[j + 2] = colorsObj[cutoffs[k]][2]; //blue channel\n        imgData.data[j + 3] = 255; //alpha channel\n        break;\n      }\n    }\n  }\n  ctx.putImageData(imgData, 0, 0);\n};\n\nexport default drawMandlebrot;\n\n\n\n// WEBPACK FOOTER //\n// ./js/draw_mandlebrot.js","import jscolor from './jscolor';\n\nimport setColors from './set_colors';\n\nconst setupColorPicker = () => {\n  const colorPicker = document.getElementById('color-picker');\n\n  const addColorButton = document.createElement('BUTTON');\n  addColorButton.innerHTML = 'add color';\n\n  colorPicker.appendChild(addColorButton);\n\n  const addColorForm = document.getElementById('add-color');\n  addColorForm.style.visibility = 'hidden';\n\n  const colorsList = document.getElementById('colors-list');\n\n  addColorForm.onsubmit = (e) => {\n    e.preventDefault();\n\n    const color = document.getElementById('color');\n    const width = document.getElementById('width');\n\n    const rgb = color.style.backgroundColor.match(/[\\d]{1,3}/g);\n\n    const newLi = document.createElement('li');\n    newLi.innerHTML = `${width.value} incs`;\n    newLi.style.backgroundColor = color.style.backgroundColor;\n\n    if(((rgb.reduce((a, b) => parseInt(a) + parseInt(b))) / 3) < 127) {\n      newLi.style.color = 'white';\n    }\n\n    //get first li in colorsList\n    const firstLi = colorsList.childNodes[0];\n    // debugger;\n\n    if(firstLi) {\n      colorsList.insertBefore(newLi, firstLi);\n    } else {\n      colorsList.appendChild(newLi);\n    }\n  };\n\n  const handleAddColorClick = () => {\n    if (addColorButton.innerHTML === 'add color') {\n      addColorForm.style.visibility = 'visible';\n      addColorButton.innerHTML = 'hide';\n    } else {\n      addColorForm.style.visibility = 'hidden';\n      addColorButton.innerHTML = 'add color';\n    }\n  }\n  addColorButton.onclick = handleAddColorClick;\n}\n\nexport default setupColorPicker;\n\n\n\n// WEBPACK FOOTER //\n// ./js/color_picker.js","/**\r\n * jscolor - JavaScript Color Picker\r\n *\r\n * @link    http://jscolor.com\r\n * @license For open source use: GPLv3\r\n *          For commercial use: JSColor Commercial License\r\n * @author  Jan Odvarko\r\n * @version 2.0.4\r\n *\r\n * See usage examples at http://jscolor.com/examples/\r\n */\r\n\r\n\r\n\"use strict\";\r\n\r\n\r\nif (!window.jscolor) { window.jscolor = (function () {\r\n\r\n\r\nvar jsc = {\r\n\r\n\r\n\tregister : function () {\r\n\t\tjsc.attachDOMReadyEvent(jsc.init);\r\n\t\tjsc.attachEvent(document, 'mousedown', jsc.onDocumentMouseDown);\r\n\t\tjsc.attachEvent(document, 'touchstart', jsc.onDocumentTouchStart);\r\n\t\tjsc.attachEvent(window, 'resize', jsc.onWindowResize);\r\n\t},\r\n\r\n\r\n\tinit : function () {\r\n\t\tif (jsc.jscolor.lookupClass) {\r\n\t\t\tjsc.jscolor.installByClassName(jsc.jscolor.lookupClass);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\ttryInstallOnElements : function (elms, className) {\r\n\t\tvar matchClass = new RegExp('(^|\\\\s)(' + className + ')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\r\n\r\n\t\tfor (var i = 0; i < elms.length; i += 1) {\r\n\t\t\tif (elms[i].type !== undefined && elms[i].type.toLowerCase() == 'color') {\r\n\t\t\t\tif (jsc.isColorAttrSupported) {\r\n\t\t\t\t\t// skip inputs of type 'color' if supported by the browser\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar m;\r\n\t\t\tif (!elms[i].jscolor && elms[i].className && (m = elms[i].className.match(matchClass))) {\r\n\t\t\t\tvar targetElm = elms[i];\r\n\t\t\t\tvar optsStr = null;\r\n\r\n\t\t\t\tvar dataOptions = jsc.getDataAttr(targetElm, 'jscolor');\r\n\t\t\t\tif (dataOptions !== null) {\r\n\t\t\t\t\toptsStr = dataOptions;\r\n\t\t\t\t} else if (m[4]) {\r\n\t\t\t\t\toptsStr = m[4];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar opts = {};\r\n\t\t\t\tif (optsStr) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\topts = (new Function ('return (' + optsStr + ')'))();\r\n\t\t\t\t\t} catch(eParseError) {\r\n\t\t\t\t\t\tjsc.warn('Error parsing jscolor options: ' + eParseError + ':\\n' + optsStr);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttargetElm.jscolor = new jsc.jscolor(targetElm, opts);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tisColorAttrSupported : (function () {\r\n\t\tvar elm = document.createElement('input');\r\n\t\tif (elm.setAttribute) {\r\n\t\t\telm.setAttribute('type', 'color');\r\n\t\t\tif (elm.type.toLowerCase() == 'color') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t})(),\r\n\r\n\r\n\tisCanvasSupported : (function () {\r\n\t\tvar elm = document.createElement('canvas');\r\n\t\treturn !!(elm.getContext && elm.getContext('2d'));\r\n\t})(),\r\n\r\n\r\n\tfetchElement : function (mixed) {\r\n\t\treturn typeof mixed === 'string' ? document.getElementById(mixed) : mixed;\r\n\t},\r\n\r\n\r\n\tisElementType : function (elm, type) {\r\n\t\treturn elm.nodeName.toLowerCase() === type.toLowerCase();\r\n\t},\r\n\r\n\r\n\tgetDataAttr : function (el, name) {\r\n\t\tvar attrName = 'data-' + name;\r\n\t\tvar attrValue = el.getAttribute(attrName);\r\n\t\tif (attrValue !== null) {\r\n\t\t\treturn attrValue;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\r\n\tattachEvent : function (el, evnt, func) {\r\n\t\tif (el.addEventListener) {\r\n\t\t\tel.addEventListener(evnt, func, false);\r\n\t\t} else if (el.attachEvent) {\r\n\t\t\tel.attachEvent('on' + evnt, func);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tdetachEvent : function (el, evnt, func) {\r\n\t\tif (el.removeEventListener) {\r\n\t\t\tel.removeEventListener(evnt, func, false);\r\n\t\t} else if (el.detachEvent) {\r\n\t\t\tel.detachEvent('on' + evnt, func);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_attachedGroupEvents : {},\r\n\r\n\r\n\tattachGroupEvent : function (groupName, el, evnt, func) {\r\n\t\tif (!jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\r\n\t\t\tjsc._attachedGroupEvents[groupName] = [];\r\n\t\t}\r\n\t\tjsc._attachedGroupEvents[groupName].push([el, evnt, func]);\r\n\t\tjsc.attachEvent(el, evnt, func);\r\n\t},\r\n\r\n\r\n\tdetachGroupEvents : function (groupName) {\r\n\t\tif (jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\r\n\t\t\tfor (var i = 0; i < jsc._attachedGroupEvents[groupName].length; i += 1) {\r\n\t\t\t\tvar evt = jsc._attachedGroupEvents[groupName][i];\r\n\t\t\t\tjsc.detachEvent(evt[0], evt[1], evt[2]);\r\n\t\t\t}\r\n\t\t\tdelete jsc._attachedGroupEvents[groupName];\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tattachDOMReadyEvent : function (func) {\r\n\t\tvar fired = false;\r\n\t\tvar fireOnce = function () {\r\n\t\t\tif (!fired) {\r\n\t\t\t\tfired = true;\r\n\t\t\t\tfunc();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (document.readyState === 'complete') {\r\n\t\t\tsetTimeout(fireOnce, 1); // async\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (document.addEventListener) {\r\n\t\t\tdocument.addEventListener('DOMContentLoaded', fireOnce, false);\r\n\r\n\t\t\t// Fallback\r\n\t\t\twindow.addEventListener('load', fireOnce, false);\r\n\r\n\t\t} else if (document.attachEvent) {\r\n\t\t\t// IE\r\n\t\t\tdocument.attachEvent('onreadystatechange', function () {\r\n\t\t\t\tif (document.readyState === 'complete') {\r\n\t\t\t\t\tdocument.detachEvent('onreadystatechange', arguments.callee);\r\n\t\t\t\t\tfireOnce();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// Fallback\r\n\t\t\twindow.attachEvent('onload', fireOnce);\r\n\r\n\t\t\t// IE7/8\r\n\t\t\tif (document.documentElement.doScroll && window == window.top) {\r\n\t\t\t\tvar tryScroll = function () {\r\n\t\t\t\t\tif (!document.body) { return; }\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdocument.documentElement.doScroll('left');\r\n\t\t\t\t\t\tfireOnce();\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tsetTimeout(tryScroll, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\ttryScroll();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\twarn : function (msg) {\r\n\t\tif (window.console && window.console.warn) {\r\n\t\t\twindow.console.warn(msg);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tpreventDefault : function (e) {\r\n\t\tif (e.preventDefault) { e.preventDefault(); }\r\n\t\te.returnValue = false;\r\n\t},\r\n\r\n\r\n\tcaptureTarget : function (target) {\r\n\t\t// IE\r\n\t\tif (target.setCapture) {\r\n\t\t\tjsc._capturedTarget = target;\r\n\t\t\tjsc._capturedTarget.setCapture();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\treleaseTarget : function () {\r\n\t\t// IE\r\n\t\tif (jsc._capturedTarget) {\r\n\t\t\tjsc._capturedTarget.releaseCapture();\r\n\t\t\tjsc._capturedTarget = null;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tfireEvent : function (el, evnt) {\r\n\t\tif (!el) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (document.createEvent) {\r\n\t\t\tvar ev = document.createEvent('HTMLEvents');\r\n\t\t\tev.initEvent(evnt, true, true);\r\n\t\t\tel.dispatchEvent(ev);\r\n\t\t} else if (document.createEventObject) {\r\n\t\t\tvar ev = document.createEventObject();\r\n\t\t\tel.fireEvent('on' + evnt, ev);\r\n\t\t} else if (el['on' + evnt]) { // alternatively use the traditional event model\r\n\t\t\tel['on' + evnt]();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tclassNameToList : function (className) {\r\n\t\treturn className.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can only contain a single class name\r\n\thasClass : function (elm, className) {\r\n\t\tif (!className) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn -1 != (' ' + elm.className.replace(/\\s+/g, ' ') + ' ').indexOf(' ' + className + ' ');\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\tsetClass : function (elm, className) {\r\n\t\tvar classList = jsc.classNameToList(className);\r\n\t\tfor (var i = 0; i < classList.length; i += 1) {\r\n\t\t\tif (!jsc.hasClass(elm, classList[i])) {\r\n\t\t\t\telm.className += (elm.className ? ' ' : '') + classList[i];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\tunsetClass : function (elm, className) {\r\n\t\tvar classList = jsc.classNameToList(className);\r\n\t\tfor (var i = 0; i < classList.length; i += 1) {\r\n\t\t\tvar repl = new RegExp(\r\n\t\t\t\t'^\\\\s*' + classList[i] + '\\\\s*|' +\r\n\t\t\t\t'\\\\s*' + classList[i] + '\\\\s*$|' +\r\n\t\t\t\t'\\\\s+' + classList[i] + '(\\\\s+)',\r\n\t\t\t\t'g'\r\n\t\t\t);\r\n\t\t\telm.className = elm.className.replace(repl, '$1');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tgetStyle : function (elm) {\r\n\t\treturn window.getComputedStyle ? window.getComputedStyle(elm) : elm.currentStyle;\r\n\t},\r\n\r\n\r\n\tsetStyle : (function () {\r\n\t\tvar helper = document.createElement('div');\r\n\t\tvar getSupportedProp = function (names) {\r\n\t\t\tfor (var i = 0; i < names.length; i += 1) {\r\n\t\t\t\tif (names[i] in helper.style) {\r\n\t\t\t\t\treturn names[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar props = {\r\n\t\t\tborderRadius: getSupportedProp(['borderRadius', 'MozBorderRadius', 'webkitBorderRadius']),\r\n\t\t\tboxShadow: getSupportedProp(['boxShadow', 'MozBoxShadow', 'webkitBoxShadow'])\r\n\t\t};\r\n\t\treturn function (elm, prop, value) {\r\n\t\t\tswitch (prop.toLowerCase()) {\r\n\t\t\tcase 'opacity':\r\n\t\t\t\tvar alphaOpacity = Math.round(parseFloat(value) * 100);\r\n\t\t\t\telm.style.opacity = value;\r\n\t\t\t\telm.style.filter = 'alpha(opacity=' + alphaOpacity + ')';\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\telm.style[props[prop]] = value;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t})(),\r\n\r\n\r\n\tsetBorderRadius : function (elm, value) {\r\n\t\tjsc.setStyle(elm, 'borderRadius', value || '0');\r\n\t},\r\n\r\n\r\n\tsetBoxShadow : function (elm, value) {\r\n\t\tjsc.setStyle(elm, 'boxShadow', value || 'none');\r\n\t},\r\n\r\n\r\n\tgetElementPos : function (e, relativeToViewport) {\r\n\t\tvar x=0, y=0;\r\n\t\tvar rect = e.getBoundingClientRect();\r\n\t\tx = rect.left;\r\n\t\ty = rect.top;\r\n\t\tif (!relativeToViewport) {\r\n\t\t\tvar viewPos = jsc.getViewPos();\r\n\t\t\tx += viewPos[0];\r\n\t\t\ty += viewPos[1];\r\n\t\t}\r\n\t\treturn [x, y];\r\n\t},\r\n\r\n\r\n\tgetElementSize : function (e) {\r\n\t\treturn [e.offsetWidth, e.offsetHeight];\r\n\t},\r\n\r\n\r\n\t// get pointer's X/Y coordinates relative to viewport\r\n\tgetAbsPointerPos : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar x = 0, y = 0;\r\n\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\r\n\t\t\t// touch devices\r\n\t\t\tx = e.changedTouches[0].clientX;\r\n\t\t\ty = e.changedTouches[0].clientY;\r\n\t\t} else if (typeof e.clientX === 'number') {\r\n\t\t\tx = e.clientX;\r\n\t\t\ty = e.clientY;\r\n\t\t}\r\n\t\treturn { x: x, y: y };\r\n\t},\r\n\r\n\r\n\t// get pointer's X/Y coordinates relative to target element\r\n\tgetRelPointerPos : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tvar targetRect = target.getBoundingClientRect();\r\n\r\n\t\tvar x = 0, y = 0;\r\n\r\n\t\tvar clientX = 0, clientY = 0;\r\n\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\r\n\t\t\t// touch devices\r\n\t\t\tclientX = e.changedTouches[0].clientX;\r\n\t\t\tclientY = e.changedTouches[0].clientY;\r\n\t\t} else if (typeof e.clientX === 'number') {\r\n\t\t\tclientX = e.clientX;\r\n\t\t\tclientY = e.clientY;\r\n\t\t}\r\n\r\n\t\tx = clientX - targetRect.left;\r\n\t\ty = clientY - targetRect.top;\r\n\t\treturn { x: x, y: y };\r\n\t},\r\n\r\n\r\n\tgetViewPos : function () {\r\n\t\tvar doc = document.documentElement;\r\n\t\treturn [\r\n\t\t\t(window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\r\n\t\t\t(window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n\t\t];\r\n\t},\r\n\r\n\r\n\tgetViewSize : function () {\r\n\t\tvar doc = document.documentElement;\r\n\t\treturn [\r\n\t\t\t(window.innerWidth || doc.clientWidth),\r\n\t\t\t(window.innerHeight || doc.clientHeight),\r\n\t\t];\r\n\t},\r\n\r\n\r\n\tredrawPosition : function () {\r\n\r\n\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\tvar thisObj = jsc.picker.owner;\r\n\r\n\t\t\tvar tp, vp;\r\n\r\n\t\t\tif (thisObj.fixed) {\r\n\t\t\t\t// Fixed elements are positioned relative to viewport,\r\n\t\t\t\t// therefore we can ignore the scroll offset\r\n\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement, true); // target pos\r\n\t\t\t\tvp = [0, 0]; // view pos\r\n\t\t\t} else {\r\n\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement); // target pos\r\n\t\t\t\tvp = jsc.getViewPos(); // view pos\r\n\t\t\t}\r\n\r\n\t\t\tvar ts = jsc.getElementSize(thisObj.targetElement); // target size\r\n\t\t\tvar vs = jsc.getViewSize(); // view size\r\n\t\t\tvar ps = jsc.getPickerOuterDims(thisObj); // picker size\r\n\t\t\tvar a, b, c;\r\n\t\t\tswitch (thisObj.position.toLowerCase()) {\r\n\t\t\t\tcase 'left': a=1; b=0; c=-1; break;\r\n\t\t\t\tcase 'right':a=1; b=0; c=1; break;\r\n\t\t\t\tcase 'top':  a=0; b=1; c=-1; break;\r\n\t\t\t\tdefault:     a=0; b=1; c=1; break;\r\n\t\t\t}\r\n\t\t\tvar l = (ts[b]+ps[b])/2;\r\n\r\n\t\t\t// compute picker position\r\n\t\t\tif (!thisObj.smartPosition) {\r\n\t\t\t\tvar pp = [\r\n\t\t\t\t\ttp[a],\r\n\t\t\t\t\ttp[b]+ts[b]-l+l*c\r\n\t\t\t\t];\r\n\t\t\t} else {\r\n\t\t\t\tvar pp = [\r\n\t\t\t\t\t-vp[a]+tp[a]+ps[a] > vs[a] ?\r\n\t\t\t\t\t\t(-vp[a]+tp[a]+ts[a]/2 > vs[a]/2 && tp[a]+ts[a]-ps[a] >= 0 ? tp[a]+ts[a]-ps[a] : tp[a]) :\r\n\t\t\t\t\t\ttp[a],\r\n\t\t\t\t\t-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c > vs[b] ?\r\n\t\t\t\t\t\t(-vp[b]+tp[b]+ts[b]/2 > vs[b]/2 && tp[b]+ts[b]-l-l*c >= 0 ? tp[b]+ts[b]-l-l*c : tp[b]+ts[b]-l+l*c) :\r\n\t\t\t\t\t\t(tp[b]+ts[b]-l+l*c >= 0 ? tp[b]+ts[b]-l+l*c : tp[b]+ts[b]-l-l*c)\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\t\t\tvar x = pp[a];\r\n\t\t\tvar y = pp[b];\r\n\t\t\tvar positionValue = thisObj.fixed ? 'fixed' : 'absolute';\r\n\t\t\tvar contractShadow =\r\n\t\t\t\t(pp[0] + ps[0] > tp[0] || pp[0] < tp[0] + ts[0]) &&\r\n\t\t\t\t(pp[1] + ps[1] < tp[1] + ts[1]);\r\n\r\n\t\t\tjsc._drawPosition(thisObj, x, y, positionValue, contractShadow);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_drawPosition : function (thisObj, x, y, positionValue, contractShadow) {\r\n\t\tvar vShadow = contractShadow ? 0 : thisObj.shadowBlur; // px\r\n\r\n\t\tjsc.picker.wrap.style.position = positionValue;\r\n\t\tjsc.picker.wrap.style.left = x + 'px';\r\n\t\tjsc.picker.wrap.style.top = y + 'px';\r\n\r\n\t\tjsc.setBoxShadow(\r\n\t\t\tjsc.picker.boxS,\r\n\t\t\tthisObj.shadow ?\r\n\t\t\t\tnew jsc.BoxShadow(0, vShadow, thisObj.shadowBlur, 0, thisObj.shadowColor) :\r\n\t\t\t\tnull);\r\n\t},\r\n\r\n\r\n\tgetPickerDims : function (thisObj) {\r\n\t\tvar displaySlider = !!jsc.getSliderComponent(thisObj);\r\n\t\tvar dims = [\r\n\t\t\t2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.width +\r\n\t\t\t\t(displaySlider ? 2 * thisObj.insetWidth + jsc.getPadToSliderPadding(thisObj) + thisObj.sliderSize : 0),\r\n\t\t\t2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.height +\r\n\t\t\t\t(thisObj.closable ? 2 * thisObj.insetWidth + thisObj.padding + thisObj.buttonHeight : 0)\r\n\t\t];\r\n\t\treturn dims;\r\n\t},\r\n\r\n\r\n\tgetPickerOuterDims : function (thisObj) {\r\n\t\tvar dims = jsc.getPickerDims(thisObj);\r\n\t\treturn [\r\n\t\t\tdims[0] + 2 * thisObj.borderWidth,\r\n\t\t\tdims[1] + 2 * thisObj.borderWidth\r\n\t\t];\r\n\t},\r\n\r\n\r\n\tgetPadToSliderPadding : function (thisObj) {\r\n\t\treturn Math.max(thisObj.padding, 1.5 * (2 * thisObj.pointerBorderWidth + thisObj.pointerThickness));\r\n\t},\r\n\r\n\r\n\tgetPadYComponent : function (thisObj) {\r\n\t\tswitch (thisObj.mode.charAt(1).toLowerCase()) {\r\n\t\t\tcase 'v': return 'v'; break;\r\n\t\t}\r\n\t\treturn 's';\r\n\t},\r\n\r\n\r\n\tgetSliderComponent : function (thisObj) {\r\n\t\tif (thisObj.mode.length > 2) {\r\n\t\t\tswitch (thisObj.mode.charAt(2).toLowerCase()) {\r\n\t\t\t\tcase 's': return 's'; break;\r\n\t\t\t\tcase 'v': return 'v'; break;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\r\n\tonDocumentMouseDown : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif (target._jscLinkedInstance) {\r\n\t\t\tif (target._jscLinkedInstance.showOnClick) {\r\n\t\t\t\ttarget._jscLinkedInstance.show();\r\n\t\t\t}\r\n\t\t} else if (target._jscControlName) {\r\n\t\t\tjsc.onControlPointerStart(e, target, target._jscControlName, 'mouse');\r\n\t\t} else {\r\n\t\t\t// Mouse is outside the picker controls -> hide the color picker!\r\n\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\tjsc.picker.owner.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonDocumentTouchStart : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif (target._jscLinkedInstance) {\r\n\t\t\tif (target._jscLinkedInstance.showOnClick) {\r\n\t\t\t\ttarget._jscLinkedInstance.show();\r\n\t\t\t}\r\n\t\t} else if (target._jscControlName) {\r\n\t\t\tjsc.onControlPointerStart(e, target, target._jscControlName, 'touch');\r\n\t\t} else {\r\n\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\tjsc.picker.owner.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonWindowResize : function (e) {\r\n\t\tjsc.redrawPosition();\r\n\t},\r\n\r\n\r\n\tonParentScroll : function (e) {\r\n\t\t// hide the picker when one of the parent elements is scrolled\r\n\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\tjsc.picker.owner.hide();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_pointerMoveEvent : {\r\n\t\tmouse: 'mousemove',\r\n\t\ttouch: 'touchmove'\r\n\t},\r\n\t_pointerEndEvent : {\r\n\t\tmouse: 'mouseup',\r\n\t\ttouch: 'touchend'\r\n\t},\r\n\r\n\r\n\t_pointerOrigin : null,\r\n\t_capturedTarget : null,\r\n\r\n\r\n\tonControlPointerStart : function (e, target, controlName, pointerType) {\r\n\t\tvar thisObj = target._jscInstance;\r\n\r\n\t\tjsc.preventDefault(e);\r\n\t\tjsc.captureTarget(target);\r\n\r\n\t\tvar registerDragEvents = function (doc, offset) {\r\n\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerMoveEvent[pointerType],\r\n\t\t\t\tjsc.onDocumentPointerMove(e, target, controlName, pointerType, offset));\r\n\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerEndEvent[pointerType],\r\n\t\t\t\tjsc.onDocumentPointerEnd(e, target, controlName, pointerType));\r\n\t\t};\r\n\r\n\t\tregisterDragEvents(document, [0, 0]);\r\n\r\n\t\tif (window.parent && window.frameElement) {\r\n\t\t\tvar rect = window.frameElement.getBoundingClientRect();\r\n\t\t\tvar ofs = [-rect.left, -rect.top];\r\n\t\t\tregisterDragEvents(window.parent.window.document, ofs);\r\n\t\t}\r\n\r\n\t\tvar abs = jsc.getAbsPointerPos(e);\r\n\t\tvar rel = jsc.getRelPointerPos(e);\r\n\t\tjsc._pointerOrigin = {\r\n\t\t\tx: abs.x - rel.x,\r\n\t\t\ty: abs.y - rel.y\r\n\t\t};\r\n\r\n\t\tswitch (controlName) {\r\n\t\tcase 'pad':\r\n\t\t\t// if the slider is at the bottom, move it up\r\n\t\t\tswitch (jsc.getSliderComponent(thisObj)) {\r\n\t\t\tcase 's': if (thisObj.hsv[1] === 0) { thisObj.fromHSV(null, 100, null); }; break;\r\n\t\t\tcase 'v': if (thisObj.hsv[2] === 0) { thisObj.fromHSV(null, null, 100); }; break;\r\n\t\t\t}\r\n\t\t\tjsc.setPad(thisObj, e, 0, 0);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'sld':\r\n\t\t\tjsc.setSld(thisObj, e, 0);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tjsc.dispatchFineChange(thisObj);\r\n\t},\r\n\r\n\r\n\tonDocumentPointerMove : function (e, target, controlName, pointerType, offset) {\r\n\t\treturn function (e) {\r\n\t\t\tvar thisObj = target._jscInstance;\r\n\t\t\tswitch (controlName) {\r\n\t\t\tcase 'pad':\r\n\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\tjsc.setPad(thisObj, e, offset[0], offset[1]);\r\n\t\t\t\tjsc.dispatchFineChange(thisObj);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'sld':\r\n\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\tjsc.setSld(thisObj, e, offset[1]);\r\n\t\t\t\tjsc.dispatchFineChange(thisObj);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonDocumentPointerEnd : function (e, target, controlName, pointerType) {\r\n\t\treturn function (e) {\r\n\t\t\tvar thisObj = target._jscInstance;\r\n\t\t\tjsc.detachGroupEvents('drag');\r\n\t\t\tjsc.releaseTarget();\r\n\t\t\t// Always dispatch changes after detaching outstanding mouse handlers,\r\n\t\t\t// in case some user interaction will occur in user's onchange callback\r\n\t\t\t// that would intrude with current mouse events\r\n\t\t\tjsc.dispatchChange(thisObj);\r\n\t\t};\r\n\t},\r\n\r\n\r\n\tdispatchChange : function (thisObj) {\r\n\t\tif (thisObj.valueElement) {\r\n\t\t\tif (jsc.isElementType(thisObj.valueElement, 'input')) {\r\n\t\t\t\tjsc.fireEvent(thisObj.valueElement, 'change');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tdispatchFineChange : function (thisObj) {\r\n\t\tif (thisObj.onFineChange) {\r\n\t\t\tvar callback;\r\n\t\t\tif (typeof thisObj.onFineChange === 'string') {\r\n\t\t\t\tcallback = new Function (thisObj.onFineChange);\r\n\t\t\t} else {\r\n\t\t\t\tcallback = thisObj.onFineChange;\r\n\t\t\t}\r\n\t\t\tcallback.call(thisObj);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tsetPad : function (thisObj, e, ofsX, ofsY) {\r\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\tvar x = ofsX + pointerAbs.x - jsc._pointerOrigin.x - thisObj.padding - thisObj.insetWidth;\r\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\r\n\r\n\t\tvar xVal = x * (360 / (thisObj.width - 1));\r\n\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\tswitch (jsc.getPadYComponent(thisObj)) {\r\n\t\tcase 's': thisObj.fromHSV(xVal, yVal, null, jsc.leaveSld); break;\r\n\t\tcase 'v': thisObj.fromHSV(xVal, null, yVal, jsc.leaveSld); break;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tsetSld : function (thisObj, e, ofsY) {\r\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\r\n\r\n\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\tswitch (jsc.getSliderComponent(thisObj)) {\r\n\t\tcase 's': thisObj.fromHSV(null, yVal, null, jsc.leavePad); break;\r\n\t\tcase 'v': thisObj.fromHSV(null, null, yVal, jsc.leavePad); break;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_vmlNS : 'jsc_vml_',\r\n\t_vmlCSS : 'jsc_vml_css_',\r\n\t_vmlReady : false,\r\n\r\n\r\n\tinitVML : function () {\r\n\t\tif (!jsc._vmlReady) {\r\n\t\t\t// init VML namespace\r\n\t\t\tvar doc = document;\r\n\t\t\tif (!doc.namespaces[jsc._vmlNS]) {\r\n\t\t\t\tdoc.namespaces.add(jsc._vmlNS, 'urn:schemas-microsoft-com:vml');\r\n\t\t\t}\r\n\t\t\tif (!doc.styleSheets[jsc._vmlCSS]) {\r\n\t\t\t\tvar tags = ['shape', 'shapetype', 'group', 'background', 'path', 'formulas', 'handles', 'fill', 'stroke', 'shadow', 'textbox', 'textpath', 'imagedata', 'line', 'polyline', 'curve', 'rect', 'roundrect', 'oval', 'arc', 'image'];\r\n\t\t\t\tvar ss = doc.createStyleSheet();\r\n\t\t\t\tss.owningElement.id = jsc._vmlCSS;\r\n\t\t\t\tfor (var i = 0; i < tags.length; i += 1) {\r\n\t\t\t\t\tss.addRule(jsc._vmlNS + '\\\\:' + tags[i], 'behavior:url(#default#VML);');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tjsc._vmlReady = true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tcreatePalette : function () {\r\n\r\n\t\tvar paletteObj = {\r\n\t\t\telm: null,\r\n\t\t\tdraw: null\r\n\t\t};\r\n\r\n\t\tif (jsc.isCanvasSupported) {\r\n\t\t\t// Canvas implementation for modern browsers\r\n\r\n\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\tvar drawFunc = function (width, height, type) {\r\n\t\t\t\tcanvas.width = width;\r\n\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tvar hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\r\n\t\t\t\thGrad.addColorStop(0 / 6, '#F00');\r\n\t\t\t\thGrad.addColorStop(1 / 6, '#FF0');\r\n\t\t\t\thGrad.addColorStop(2 / 6, '#0F0');\r\n\t\t\t\thGrad.addColorStop(3 / 6, '#0FF');\r\n\t\t\t\thGrad.addColorStop(4 / 6, '#00F');\r\n\t\t\t\thGrad.addColorStop(5 / 6, '#F0F');\r\n\t\t\t\thGrad.addColorStop(6 / 6, '#F00');\r\n\r\n\t\t\t\tctx.fillStyle = hGrad;\r\n\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tvar vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\tswitch (type.toLowerCase()) {\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\tvGrad.addColorStop(0, 'rgba(255,255,255,0)');\r\n\t\t\t\t\tvGrad.addColorStop(1, 'rgba(255,255,255,1)');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'v':\r\n\t\t\t\t\tvGrad.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\t\t\t\tvGrad.addColorStop(1, 'rgba(0,0,0,1)');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tctx.fillStyle = vGrad;\r\n\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t};\r\n\r\n\t\t\tpaletteObj.elm = canvas;\r\n\t\t\tpaletteObj.draw = drawFunc;\r\n\r\n\t\t} else {\r\n\t\t\t// VML fallback for IE 7 and 8\r\n\r\n\t\t\tjsc.initVML();\r\n\r\n\t\t\tvar vmlContainer = document.createElement('div');\r\n\t\t\tvmlContainer.style.position = 'relative';\r\n\t\t\tvmlContainer.style.overflow = 'hidden';\r\n\r\n\t\t\tvar hGrad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\thGrad.type = 'gradient';\r\n\t\t\thGrad.method = 'linear';\r\n\t\t\thGrad.angle = '90';\r\n\t\t\thGrad.colors = '16.67% #F0F, 33.33% #00F, 50% #0FF, 66.67% #0F0, 83.33% #FF0'\r\n\r\n\t\t\tvar hRect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\thRect.style.position = 'absolute';\r\n\t\t\thRect.style.left = -1 + 'px';\r\n\t\t\thRect.style.top = -1 + 'px';\r\n\t\t\thRect.stroked = false;\r\n\t\t\thRect.appendChild(hGrad);\r\n\t\t\tvmlContainer.appendChild(hRect);\r\n\r\n\t\t\tvar vGrad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\tvGrad.type = 'gradient';\r\n\t\t\tvGrad.method = 'linear';\r\n\t\t\tvGrad.angle = '180';\r\n\t\t\tvGrad.opacity = '0';\r\n\r\n\t\t\tvar vRect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\tvRect.style.position = 'absolute';\r\n\t\t\tvRect.style.left = -1 + 'px';\r\n\t\t\tvRect.style.top = -1 + 'px';\r\n\t\t\tvRect.stroked = false;\r\n\t\t\tvRect.appendChild(vGrad);\r\n\t\t\tvmlContainer.appendChild(vRect);\r\n\r\n\t\t\tvar drawFunc = function (width, height, type) {\r\n\t\t\t\tvmlContainer.style.width = width + 'px';\r\n\t\t\t\tvmlContainer.style.height = height + 'px';\r\n\r\n\t\t\t\thRect.style.width =\r\n\t\t\t\tvRect.style.width =\r\n\t\t\t\t\t(width + 1) + 'px';\r\n\t\t\t\thRect.style.height =\r\n\t\t\t\tvRect.style.height =\r\n\t\t\t\t\t(height + 1) + 'px';\r\n\r\n\t\t\t\t// Colors must be specified during every redraw, otherwise IE won't display\r\n\t\t\t\t// a full gradient during a subsequential redraw\r\n\t\t\t\thGrad.color = '#F00';\r\n\t\t\t\thGrad.color2 = '#F00';\r\n\r\n\t\t\t\tswitch (type.toLowerCase()) {\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\tvGrad.color = vGrad.color2 = '#FFF';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'v':\r\n\t\t\t\t\tvGrad.color = vGrad.color2 = '#000';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tpaletteObj.elm = vmlContainer;\r\n\t\t\tpaletteObj.draw = drawFunc;\r\n\t\t}\r\n\r\n\t\treturn paletteObj;\r\n\t},\r\n\r\n\r\n\tcreateSliderGradient : function () {\r\n\r\n\t\tvar sliderObj = {\r\n\t\t\telm: null,\r\n\t\t\tdraw: null\r\n\t\t};\r\n\r\n\t\tif (jsc.isCanvasSupported) {\r\n\t\t\t// Canvas implementation for modern browsers\r\n\r\n\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\tvar drawFunc = function (width, height, color1, color2) {\r\n\t\t\t\tcanvas.width = width;\r\n\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\tgrad.addColorStop(0, color1);\r\n\t\t\t\tgrad.addColorStop(1, color2);\r\n\r\n\t\t\t\tctx.fillStyle = grad;\r\n\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t};\r\n\r\n\t\t\tsliderObj.elm = canvas;\r\n\t\t\tsliderObj.draw = drawFunc;\r\n\r\n\t\t} else {\r\n\t\t\t// VML fallback for IE 7 and 8\r\n\r\n\t\t\tjsc.initVML();\r\n\r\n\t\t\tvar vmlContainer = document.createElement('div');\r\n\t\t\tvmlContainer.style.position = 'relative';\r\n\t\t\tvmlContainer.style.overflow = 'hidden';\r\n\r\n\t\t\tvar grad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\tgrad.type = 'gradient';\r\n\t\t\tgrad.method = 'linear';\r\n\t\t\tgrad.angle = '180';\r\n\r\n\t\t\tvar rect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\trect.style.position = 'absolute';\r\n\t\t\trect.style.left = -1 + 'px';\r\n\t\t\trect.style.top = -1 + 'px';\r\n\t\t\trect.stroked = false;\r\n\t\t\trect.appendChild(grad);\r\n\t\t\tvmlContainer.appendChild(rect);\r\n\r\n\t\t\tvar drawFunc = function (width, height, color1, color2) {\r\n\t\t\t\tvmlContainer.style.width = width + 'px';\r\n\t\t\t\tvmlContainer.style.height = height + 'px';\r\n\r\n\t\t\t\trect.style.width = (width + 1) + 'px';\r\n\t\t\t\trect.style.height = (height + 1) + 'px';\r\n\r\n\t\t\t\tgrad.color = color1;\r\n\t\t\t\tgrad.color2 = color2;\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tsliderObj.elm = vmlContainer;\r\n\t\t\tsliderObj.draw = drawFunc;\r\n\t\t}\r\n\r\n\t\treturn sliderObj;\r\n\t},\r\n\r\n\r\n\tleaveValue : 1<<0,\r\n\tleaveStyle : 1<<1,\r\n\tleavePad : 1<<2,\r\n\tleaveSld : 1<<3,\r\n\r\n\r\n\tBoxShadow : (function () {\r\n\t\tvar BoxShadow = function (hShadow, vShadow, blur, spread, color, inset) {\r\n\t\t\tthis.hShadow = hShadow;\r\n\t\t\tthis.vShadow = vShadow;\r\n\t\t\tthis.blur = blur;\r\n\t\t\tthis.spread = spread;\r\n\t\t\tthis.color = color;\r\n\t\t\tthis.inset = !!inset;\r\n\t\t};\r\n\r\n\t\tBoxShadow.prototype.toString = function () {\r\n\t\t\tvar vals = [\r\n\t\t\t\tMath.round(this.hShadow) + 'px',\r\n\t\t\t\tMath.round(this.vShadow) + 'px',\r\n\t\t\t\tMath.round(this.blur) + 'px',\r\n\t\t\t\tMath.round(this.spread) + 'px',\r\n\t\t\t\tthis.color\r\n\t\t\t];\r\n\t\t\tif (this.inset) {\r\n\t\t\t\tvals.push('inset');\r\n\t\t\t}\r\n\t\t\treturn vals.join(' ');\r\n\t\t};\r\n\r\n\t\treturn BoxShadow;\r\n\t})(),\r\n\r\n\r\n\t//\r\n\t// Usage:\r\n\t// var myColor = new jscolor(<targetElement> [, <options>])\r\n\t//\r\n\r\n\tjscolor : function (targetElement, options) {\r\n\r\n\t\t// General options\r\n\t\t//\r\n\t\tthis.value = null; // initial HEX color. To change it later, use methods fromString(), fromHSV() and fromRGB()\r\n\t\tthis.valueElement = targetElement; // element that will be used to display and input the color code\r\n\t\tthis.styleElement = targetElement; // element that will preview the picked color using CSS backgroundColor\r\n\t\tthis.required = true; // whether the associated text <input> can be left empty\r\n\t\tthis.refine = true; // whether to refine the entered color code (e.g. uppercase it and remove whitespace)\r\n\t\tthis.hash = false; // whether to prefix the HEX color code with # symbol\r\n\t\tthis.uppercase = true; // whether to uppercase the color code\r\n\t\tthis.onFineChange = null; // called instantly every time the color changes (value can be either a function or a string with javascript code)\r\n\t\tthis.activeClass = 'jscolor-active'; // class to be set to the target element when a picker window is open on it\r\n\t\tthis.minS = 0; // min allowed saturation (0 - 100)\r\n\t\tthis.maxS = 100; // max allowed saturation (0 - 100)\r\n\t\tthis.minV = 0; // min allowed value (brightness) (0 - 100)\r\n\t\tthis.maxV = 100; // max allowed value (brightness) (0 - 100)\r\n\r\n\t\t// Accessing the picked color\r\n\t\t//\r\n\t\tthis.hsv = [0, 0, 100]; // read-only  [0-360, 0-100, 0-100]\r\n\t\tthis.rgb = [255, 255, 255]; // read-only  [0-255, 0-255, 0-255]\r\n\r\n\t\t// Color Picker options\r\n\t\t//\r\n\t\tthis.width = 181; // width of color palette (in px)\r\n\t\tthis.height = 101; // height of color palette (in px)\r\n\t\tthis.showOnClick = true; // whether to display the color picker when user clicks on its target element\r\n\t\tthis.mode = 'HSV'; // HSV | HVS | HS | HV - layout of the color picker controls\r\n\t\tthis.position = 'bottom'; // left | right | top | bottom - position relative to the target element\r\n\t\tthis.smartPosition = true; // automatically change picker position when there is not enough space for it\r\n\t\tthis.sliderSize = 16; // px\r\n\t\tthis.crossSize = 8; // px\r\n\t\tthis.closable = false; // whether to display the Close button\r\n\t\tthis.closeText = 'Close';\r\n\t\tthis.buttonColor = '#000000'; // CSS color\r\n\t\tthis.buttonHeight = 18; // px\r\n\t\tthis.padding = 12; // px\r\n\t\tthis.backgroundColor = '#FFFFFF'; // CSS color\r\n\t\tthis.borderWidth = 1; // px\r\n\t\tthis.borderColor = '#BBBBBB'; // CSS color\r\n\t\tthis.borderRadius = 8; // px\r\n\t\tthis.insetWidth = 1; // px\r\n\t\tthis.insetColor = '#BBBBBB'; // CSS color\r\n\t\tthis.shadow = true; // whether to display shadow\r\n\t\tthis.shadowBlur = 15; // px\r\n\t\tthis.shadowColor = 'rgba(0,0,0,0.2)'; // CSS color\r\n\t\tthis.pointerColor = '#4C4C4C'; // px\r\n\t\tthis.pointerBorderColor = '#FFFFFF'; // px\r\n        this.pointerBorderWidth = 1; // px\r\n        this.pointerThickness = 2; // px\r\n\t\tthis.zIndex = 1000;\r\n\t\tthis.container = null; // where to append the color picker (BODY element by default)\r\n\r\n\r\n\t\tfor (var opt in options) {\r\n\t\t\tif (options.hasOwnProperty(opt)) {\r\n\t\t\t\tthis[opt] = options[opt];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.hide = function () {\r\n\t\t\tif (isPickerOwner()) {\r\n\t\t\t\tdetachPicker();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.show = function () {\r\n\t\t\tdrawPicker();\r\n\t\t};\r\n\r\n\r\n\t\tthis.redraw = function () {\r\n\t\t\tif (isPickerOwner()) {\r\n\t\t\t\tdrawPicker();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.importColor = function () {\r\n\t\t\tif (!this.valueElement) {\r\n\t\t\t\tthis.exportColor();\r\n\t\t\t} else {\r\n\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\t\tif (!this.refine) {\r\n\t\t\t\t\t\tif (!this.fromString(this.valueElement.value, jsc.leaveValue)) {\r\n\t\t\t\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.color = this.styleElement._jscOrigStyle.color;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.exportColor(jsc.leaveValue | jsc.leaveStyle);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (!this.required && /^\\s*$/.test(this.valueElement.value)) {\r\n\t\t\t\t\t\tthis.valueElement.value = '';\r\n\t\t\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\t\t\tthis.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\r\n\t\t\t\t\t\t\tthis.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\r\n\t\t\t\t\t\t\tthis.styleElement.style.color = this.styleElement._jscOrigStyle.color;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.exportColor(jsc.leaveValue | jsc.leaveStyle);\r\n\r\n\t\t\t\t\t} else if (this.fromString(this.valueElement.value)) {\r\n\t\t\t\t\t\t// managed to import color successfully from the value -> OK, don't do anything\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.exportColor();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// not an input element -> doesn't have any value\r\n\t\t\t\t\tthis.exportColor();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.exportColor = function (flags) {\r\n\t\t\tif (!(flags & jsc.leaveValue) && this.valueElement) {\r\n\t\t\t\tvar value = this.toString();\r\n\t\t\t\tif (this.uppercase) { value = value.toUpperCase(); }\r\n\t\t\t\tif (this.hash) { value = '#' + value; }\r\n\r\n\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\t\tthis.valueElement.value = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.valueElement.innerHTML = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!(flags & jsc.leaveStyle)) {\r\n\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\tthis.styleElement.style.backgroundImage = 'none';\r\n\t\t\t\t\tthis.styleElement.style.backgroundColor = '#' + this.toString();\r\n\t\t\t\t\tthis.styleElement.style.color = this.isLight() ? '#000' : '#FFF';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!(flags & jsc.leavePad) && isPickerOwner()) {\r\n\t\t\t\tredrawPad();\r\n\t\t\t}\r\n\t\t\tif (!(flags & jsc.leaveSld) && isPickerOwner()) {\r\n\t\t\t\tredrawSld();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\t// h: 0-360\r\n\t\t// s: 0-100\r\n\t\t// v: 0-100\r\n\t\t//\r\n\t\tthis.fromHSV = function (h, s, v, flags) { // null = don't change\r\n\t\t\tif (h !== null) {\r\n\t\t\t\tif (isNaN(h)) { return false; }\r\n\t\t\t\th = Math.max(0, Math.min(360, h));\r\n\t\t\t}\r\n\t\t\tif (s !== null) {\r\n\t\t\t\tif (isNaN(s)) { return false; }\r\n\t\t\t\ts = Math.max(0, Math.min(100, this.maxS, s), this.minS);\r\n\t\t\t}\r\n\t\t\tif (v !== null) {\r\n\t\t\t\tif (isNaN(v)) { return false; }\r\n\t\t\t\tv = Math.max(0, Math.min(100, this.maxV, v), this.minV);\r\n\t\t\t}\r\n\r\n\t\t\tthis.rgb = HSV_RGB(\r\n\t\t\t\th===null ? this.hsv[0] : (this.hsv[0]=h),\r\n\t\t\t\ts===null ? this.hsv[1] : (this.hsv[1]=s),\r\n\t\t\t\tv===null ? this.hsv[2] : (this.hsv[2]=v)\r\n\t\t\t);\r\n\r\n\t\t\tthis.exportColor(flags);\r\n\t\t};\r\n\r\n\r\n\t\t// r: 0-255\r\n\t\t// g: 0-255\r\n\t\t// b: 0-255\r\n\t\t//\r\n\t\tthis.fromRGB = function (r, g, b, flags) { // null = don't change\r\n\t\t\tif (r !== null) {\r\n\t\t\t\tif (isNaN(r)) { return false; }\r\n\t\t\t\tr = Math.max(0, Math.min(255, r));\r\n\t\t\t}\r\n\t\t\tif (g !== null) {\r\n\t\t\t\tif (isNaN(g)) { return false; }\r\n\t\t\t\tg = Math.max(0, Math.min(255, g));\r\n\t\t\t}\r\n\t\t\tif (b !== null) {\r\n\t\t\t\tif (isNaN(b)) { return false; }\r\n\t\t\t\tb = Math.max(0, Math.min(255, b));\r\n\t\t\t}\r\n\r\n\t\t\tvar hsv = RGB_HSV(\r\n\t\t\t\tr===null ? this.rgb[0] : r,\r\n\t\t\t\tg===null ? this.rgb[1] : g,\r\n\t\t\t\tb===null ? this.rgb[2] : b\r\n\t\t\t);\r\n\t\t\tif (hsv[0] !== null) {\r\n\t\t\t\tthis.hsv[0] = Math.max(0, Math.min(360, hsv[0]));\r\n\t\t\t}\r\n\t\t\tif (hsv[2] !== 0) {\r\n\t\t\t\tthis.hsv[1] = hsv[1]===null ? null : Math.max(0, this.minS, Math.min(100, this.maxS, hsv[1]));\r\n\t\t\t}\r\n\t\t\tthis.hsv[2] = hsv[2]===null ? null : Math.max(0, this.minV, Math.min(100, this.maxV, hsv[2]));\r\n\r\n\t\t\t// update RGB according to final HSV, as some values might be trimmed\r\n\t\t\tvar rgb = HSV_RGB(this.hsv[0], this.hsv[1], this.hsv[2]);\r\n\t\t\tthis.rgb[0] = rgb[0];\r\n\t\t\tthis.rgb[1] = rgb[1];\r\n\t\t\tthis.rgb[2] = rgb[2];\r\n\r\n\t\t\tthis.exportColor(flags);\r\n\t\t};\r\n\r\n\r\n\t\tthis.fromString = function (str, flags) {\r\n\t\t\tvar m;\r\n\t\t\tif (m = str.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i)) {\r\n\t\t\t\t// HEX notation\r\n\t\t\t\t//\r\n\r\n\t\t\t\tif (m[1].length === 6) {\r\n\t\t\t\t\t// 6-char notation\r\n\t\t\t\t\tthis.fromRGB(\r\n\t\t\t\t\t\tparseInt(m[1].substr(0,2),16),\r\n\t\t\t\t\t\tparseInt(m[1].substr(2,2),16),\r\n\t\t\t\t\t\tparseInt(m[1].substr(4,2),16),\r\n\t\t\t\t\t\tflags\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 3-char notation\r\n\t\t\t\t\tthis.fromRGB(\r\n\t\t\t\t\t\tparseInt(m[1].charAt(0) + m[1].charAt(0),16),\r\n\t\t\t\t\t\tparseInt(m[1].charAt(1) + m[1].charAt(1),16),\r\n\t\t\t\t\t\tparseInt(m[1].charAt(2) + m[1].charAt(2),16),\r\n\t\t\t\t\t\tflags\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t} else if (m = str.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i)) {\r\n\t\t\t\tvar params = m[1].split(',');\r\n\t\t\t\tvar re = /^\\s*(\\d*)(\\.\\d+)?\\s*$/;\r\n\t\t\t\tvar mR, mG, mB;\r\n\t\t\t\tif (\r\n\t\t\t\t\tparams.length >= 3 &&\r\n\t\t\t\t\t(mR = params[0].match(re)) &&\r\n\t\t\t\t\t(mG = params[1].match(re)) &&\r\n\t\t\t\t\t(mB = params[2].match(re))\r\n\t\t\t\t) {\r\n\t\t\t\t\tvar r = parseFloat((mR[1] || '0') + (mR[2] || ''));\r\n\t\t\t\t\tvar g = parseFloat((mG[1] || '0') + (mG[2] || ''));\r\n\t\t\t\t\tvar b = parseFloat((mB[1] || '0') + (mB[2] || ''));\r\n\t\t\t\t\tthis.fromRGB(r, g, b, flags);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\r\n\t\tthis.toString = function () {\r\n\t\t\treturn (\r\n\t\t\t\t(0x100 | Math.round(this.rgb[0])).toString(16).substr(1) +\r\n\t\t\t\t(0x100 | Math.round(this.rgb[1])).toString(16).substr(1) +\r\n\t\t\t\t(0x100 | Math.round(this.rgb[2])).toString(16).substr(1)\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis.toHEXString = function () {\r\n\t\t\treturn '#' + this.toString().toUpperCase();\r\n\t\t};\r\n\r\n\r\n\t\tthis.toRGBString = function () {\r\n\t\t\treturn ('rgb(' +\r\n\t\t\t\tMath.round(this.rgb[0]) + ',' +\r\n\t\t\t\tMath.round(this.rgb[1]) + ',' +\r\n\t\t\t\tMath.round(this.rgb[2]) + ')'\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis.isLight = function () {\r\n\t\t\treturn (\r\n\t\t\t\t0.213 * this.rgb[0] +\r\n\t\t\t\t0.715 * this.rgb[1] +\r\n\t\t\t\t0.072 * this.rgb[2] >\r\n\t\t\t\t255 / 2\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis._processParentElementsInDOM = function () {\r\n\t\t\tif (this._linkedElementsProcessed) { return; }\r\n\t\t\tthis._linkedElementsProcessed = true;\r\n\r\n\t\t\tvar elm = this.targetElement;\r\n\t\t\tdo {\r\n\t\t\t\t// If the target element or one of its parent nodes has fixed position,\r\n\t\t\t\t// then use fixed positioning instead\r\n\t\t\t\t//\r\n\t\t\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\r\n\t\t\t\t// that's why we need to check if the returned style object is non-empty\r\n\t\t\t\tvar currStyle = jsc.getStyle(elm);\r\n\t\t\t\tif (currStyle && currStyle.position.toLowerCase() === 'fixed') {\r\n\t\t\t\t\tthis.fixed = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (elm !== this.targetElement) {\r\n\t\t\t\t\t// Ensure to attach onParentScroll only once to each parent element\r\n\t\t\t\t\t// (multiple targetElements can share the same parent nodes)\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// Note: It's not just offsetParents that can be scrollable,\r\n\t\t\t\t\t// that's why we loop through all parent nodes\r\n\t\t\t\t\tif (!elm._jscEventsAttached) {\r\n\t\t\t\t\t\tjsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\r\n\t\t\t\t\t\telm._jscEventsAttached = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} while ((elm = elm.parentNode) && !jsc.isElementType(elm, 'body'));\r\n\t\t};\r\n\r\n\r\n\t\t// r: 0-255\r\n\t\t// g: 0-255\r\n\t\t// b: 0-255\r\n\t\t//\r\n\t\t// returns: [ 0-360, 0-100, 0-100 ]\r\n\t\t//\r\n\t\tfunction RGB_HSV (r, g, b) {\r\n\t\t\tr /= 255;\r\n\t\t\tg /= 255;\r\n\t\t\tb /= 255;\r\n\t\t\tvar n = Math.min(Math.min(r,g),b);\r\n\t\t\tvar v = Math.max(Math.max(r,g),b);\r\n\t\t\tvar m = v - n;\r\n\t\t\tif (m === 0) { return [ null, 0, 100 * v ]; }\r\n\t\t\tvar h = r===n ? 3+(b-g)/m : (g===n ? 5+(r-b)/m : 1+(g-r)/m);\r\n\t\t\treturn [\r\n\t\t\t\t60 * (h===6?0:h),\r\n\t\t\t\t100 * (m/v),\r\n\t\t\t\t100 * v\r\n\t\t\t];\r\n\t\t}\r\n\r\n\r\n\t\t// h: 0-360\r\n\t\t// s: 0-100\r\n\t\t// v: 0-100\r\n\t\t//\r\n\t\t// returns: [ 0-255, 0-255, 0-255 ]\r\n\t\t//\r\n\t\tfunction HSV_RGB (h, s, v) {\r\n\t\t\tvar u = 255 * (v / 100);\r\n\r\n\t\t\tif (h === null) {\r\n\t\t\t\treturn [ u, u, u ];\r\n\t\t\t}\r\n\r\n\t\t\th /= 60;\r\n\t\t\ts /= 100;\r\n\r\n\t\t\tvar i = Math.floor(h);\r\n\t\t\tvar f = i%2 ? h-i : 1-(h-i);\r\n\t\t\tvar m = u * (1 - s);\r\n\t\t\tvar n = u * (1 - s * f);\r\n\t\t\tswitch (i) {\r\n\t\t\t\tcase 6:\r\n\t\t\t\tcase 0: return [u,n,m];\r\n\t\t\t\tcase 1: return [n,u,m];\r\n\t\t\t\tcase 2: return [m,u,n];\r\n\t\t\t\tcase 3: return [m,n,u];\r\n\t\t\t\tcase 4: return [n,m,u];\r\n\t\t\t\tcase 5: return [u,m,n];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction detachPicker () {\r\n\t\t\tjsc.unsetClass(THIS.targetElement, THIS.activeClass);\r\n\t\t\tjsc.picker.wrap.parentNode.removeChild(jsc.picker.wrap);\r\n\t\t\tdelete jsc.picker.owner;\r\n\t\t}\r\n\r\n\r\n\t\tfunction drawPicker () {\r\n\r\n\t\t\t// At this point, when drawing the picker, we know what the parent elements are\r\n\t\t\t// and we can do all related DOM operations, such as registering events on them\r\n\t\t\t// or checking their positioning\r\n\t\t\tTHIS._processParentElementsInDOM();\r\n\r\n\t\t\tif (!jsc.picker) {\r\n\t\t\t\tjsc.picker = {\r\n\t\t\t\t\towner: null,\r\n\t\t\t\t\twrap : document.createElement('div'),\r\n\t\t\t\t\tbox : document.createElement('div'),\r\n\t\t\t\t\tboxS : document.createElement('div'), // shadow area\r\n\t\t\t\t\tboxB : document.createElement('div'), // border\r\n\t\t\t\t\tpad : document.createElement('div'),\r\n\t\t\t\t\tpadB : document.createElement('div'), // border\r\n\t\t\t\t\tpadM : document.createElement('div'), // mouse/touch area\r\n\t\t\t\t\tpadPal : jsc.createPalette(),\r\n\t\t\t\t\tcross : document.createElement('div'),\r\n\t\t\t\t\tcrossBY : document.createElement('div'), // border Y\r\n\t\t\t\t\tcrossBX : document.createElement('div'), // border X\r\n\t\t\t\t\tcrossLY : document.createElement('div'), // line Y\r\n\t\t\t\t\tcrossLX : document.createElement('div'), // line X\r\n\t\t\t\t\tsld : document.createElement('div'),\r\n\t\t\t\t\tsldB : document.createElement('div'), // border\r\n\t\t\t\t\tsldM : document.createElement('div'), // mouse/touch area\r\n\t\t\t\t\tsldGrad : jsc.createSliderGradient(),\r\n\t\t\t\t\tsldPtrS : document.createElement('div'), // slider pointer spacer\r\n\t\t\t\t\tsldPtrIB : document.createElement('div'), // slider pointer inner border\r\n\t\t\t\t\tsldPtrMB : document.createElement('div'), // slider pointer middle border\r\n\t\t\t\t\tsldPtrOB : document.createElement('div'), // slider pointer outer border\r\n\t\t\t\t\tbtn : document.createElement('div'),\r\n\t\t\t\t\tbtnT : document.createElement('span') // text\r\n\t\t\t\t};\r\n\r\n\t\t\t\tjsc.picker.pad.appendChild(jsc.picker.padPal.elm);\r\n\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.pad);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBY);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBX);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLY);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLX);\r\n\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.cross);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padB);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padM);\r\n\r\n\t\t\t\tjsc.picker.sld.appendChild(jsc.picker.sldGrad.elm);\r\n\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sld);\r\n\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sldPtrOB);\r\n\t\t\t\tjsc.picker.sldPtrOB.appendChild(jsc.picker.sldPtrMB);\r\n\t\t\t\tjsc.picker.sldPtrMB.appendChild(jsc.picker.sldPtrIB);\r\n\t\t\t\tjsc.picker.sldPtrIB.appendChild(jsc.picker.sldPtrS);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldB);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldM);\r\n\r\n\t\t\t\tjsc.picker.btn.appendChild(jsc.picker.btnT);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.btn);\r\n\r\n\t\t\t\tjsc.picker.boxB.appendChild(jsc.picker.box);\r\n\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxS);\r\n\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxB);\r\n\t\t\t}\r\n\r\n\t\t\tvar p = jsc.picker;\r\n\r\n\t\t\tvar displaySlider = !!jsc.getSliderComponent(THIS);\r\n\t\t\tvar dims = jsc.getPickerDims(THIS);\r\n\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\tvar padToSliderPadding = jsc.getPadToSliderPadding(THIS);\r\n\t\t\tvar borderRadius = Math.min(\r\n\t\t\t\tTHIS.borderRadius,\r\n\t\t\t\tMath.round(THIS.padding * Math.PI)); // px\r\n\t\t\tvar padCursor = 'crosshair';\r\n\r\n\t\t\t// wrap\r\n\t\t\tp.wrap.style.clear = 'both';\r\n\t\t\tp.wrap.style.width = (dims[0] + 2 * THIS.borderWidth) + 'px';\r\n\t\t\tp.wrap.style.height = (dims[1] + 2 * THIS.borderWidth) + 'px';\r\n\t\t\tp.wrap.style.zIndex = THIS.zIndex;\r\n\r\n\t\t\t// picker\r\n\t\t\tp.box.style.width = dims[0] + 'px';\r\n\t\t\tp.box.style.height = dims[1] + 'px';\r\n\r\n\t\t\tp.boxS.style.position = 'absolute';\r\n\t\t\tp.boxS.style.left = '0';\r\n\t\t\tp.boxS.style.top = '0';\r\n\t\t\tp.boxS.style.width = '100%';\r\n\t\t\tp.boxS.style.height = '100%';\r\n\t\t\tjsc.setBorderRadius(p.boxS, borderRadius + 'px');\r\n\r\n\t\t\t// picker border\r\n\t\t\tp.boxB.style.position = 'relative';\r\n\t\t\tp.boxB.style.border = THIS.borderWidth + 'px solid';\r\n\t\t\tp.boxB.style.borderColor = THIS.borderColor;\r\n\t\t\tp.boxB.style.background = THIS.backgroundColor;\r\n\t\t\tjsc.setBorderRadius(p.boxB, borderRadius + 'px');\r\n\r\n\t\t\t// IE hack:\r\n\t\t\t// If the element is transparent, IE will trigger the event on the elements under it,\r\n\t\t\t// e.g. on Canvas or on elements with border\r\n\t\t\tp.padM.style.background =\r\n\t\t\tp.sldM.style.background =\r\n\t\t\t\t'#FFF';\r\n\t\t\tjsc.setStyle(p.padM, 'opacity', '0');\r\n\t\t\tjsc.setStyle(p.sldM, 'opacity', '0');\r\n\r\n\t\t\t// pad\r\n\t\t\tp.pad.style.position = 'relative';\r\n\t\t\tp.pad.style.width = THIS.width + 'px';\r\n\t\t\tp.pad.style.height = THIS.height + 'px';\r\n\r\n\t\t\t// pad palettes (HSV and HVS)\r\n\t\t\tp.padPal.draw(THIS.width, THIS.height, jsc.getPadYComponent(THIS));\r\n\r\n\t\t\t// pad border\r\n\t\t\tp.padB.style.position = 'absolute';\r\n\t\t\tp.padB.style.left = THIS.padding + 'px';\r\n\t\t\tp.padB.style.top = THIS.padding + 'px';\r\n\t\t\tp.padB.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\tp.padB.style.borderColor = THIS.insetColor;\r\n\r\n\t\t\t// pad mouse area\r\n\t\t\tp.padM._jscInstance = THIS;\r\n\t\t\tp.padM._jscControlName = 'pad';\r\n\t\t\tp.padM.style.position = 'absolute';\r\n\t\t\tp.padM.style.left = '0';\r\n\t\t\tp.padM.style.top = '0';\r\n\t\t\tp.padM.style.width = (THIS.padding + 2 * THIS.insetWidth + THIS.width + padToSliderPadding / 2) + 'px';\r\n\t\t\tp.padM.style.height = dims[1] + 'px';\r\n\t\t\tp.padM.style.cursor = padCursor;\r\n\r\n\t\t\t// pad cross\r\n\t\t\tp.cross.style.position = 'absolute';\r\n\t\t\tp.cross.style.left =\r\n\t\t\tp.cross.style.top =\r\n\t\t\t\t'0';\r\n\t\t\tp.cross.style.width =\r\n\t\t\tp.cross.style.height =\r\n\t\t\t\tcrossOuterSize + 'px';\r\n\r\n\t\t\t// pad cross border Y and X\r\n\t\t\tp.crossBY.style.position =\r\n\t\t\tp.crossBX.style.position =\r\n\t\t\t\t'absolute';\r\n\t\t\tp.crossBY.style.background =\r\n\t\t\tp.crossBX.style.background =\r\n\t\t\t\tTHIS.pointerBorderColor;\r\n\t\t\tp.crossBY.style.width =\r\n\t\t\tp.crossBX.style.height =\r\n\t\t\t\t(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\tp.crossBY.style.height =\r\n\t\t\tp.crossBX.style.width =\r\n\t\t\t\tcrossOuterSize + 'px';\r\n\t\t\tp.crossBY.style.left =\r\n\t\t\tp.crossBX.style.top =\r\n\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) - THIS.pointerBorderWidth) + 'px';\r\n\t\t\tp.crossBY.style.top =\r\n\t\t\tp.crossBX.style.left =\r\n\t\t\t\t'0';\r\n\r\n\t\t\t// pad cross line Y and X\r\n\t\t\tp.crossLY.style.position =\r\n\t\t\tp.crossLX.style.position =\r\n\t\t\t\t'absolute';\r\n\t\t\tp.crossLY.style.background =\r\n\t\t\tp.crossLX.style.background =\r\n\t\t\t\tTHIS.pointerColor;\r\n\t\t\tp.crossLY.style.height =\r\n\t\t\tp.crossLX.style.width =\r\n\t\t\t\t(crossOuterSize - 2 * THIS.pointerBorderWidth) + 'px';\r\n\t\t\tp.crossLY.style.width =\r\n\t\t\tp.crossLX.style.height =\r\n\t\t\t\tTHIS.pointerThickness + 'px';\r\n\t\t\tp.crossLY.style.left =\r\n\t\t\tp.crossLX.style.top =\r\n\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2)) + 'px';\r\n\t\t\tp.crossLY.style.top =\r\n\t\t\tp.crossLX.style.left =\r\n\t\t\t\tTHIS.pointerBorderWidth + 'px';\r\n\r\n\t\t\t// slider\r\n\t\t\tp.sld.style.overflow = 'hidden';\r\n\t\t\tp.sld.style.width = THIS.sliderSize + 'px';\r\n\t\t\tp.sld.style.height = THIS.height + 'px';\r\n\r\n\t\t\t// slider gradient\r\n\t\t\tp.sldGrad.draw(THIS.sliderSize, THIS.height, '#000', '#000');\r\n\r\n\t\t\t// slider border\r\n\t\t\tp.sldB.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\tp.sldB.style.position = 'absolute';\r\n\t\t\tp.sldB.style.right = THIS.padding + 'px';\r\n\t\t\tp.sldB.style.top = THIS.padding + 'px';\r\n\t\t\tp.sldB.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\tp.sldB.style.borderColor = THIS.insetColor;\r\n\r\n\t\t\t// slider mouse area\r\n\t\t\tp.sldM._jscInstance = THIS;\r\n\t\t\tp.sldM._jscControlName = 'sld';\r\n\t\t\tp.sldM.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\tp.sldM.style.position = 'absolute';\r\n\t\t\tp.sldM.style.right = '0';\r\n\t\t\tp.sldM.style.top = '0';\r\n\t\t\tp.sldM.style.width = (THIS.sliderSize + padToSliderPadding / 2 + THIS.padding + 2 * THIS.insetWidth) + 'px';\r\n\t\t\tp.sldM.style.height = dims[1] + 'px';\r\n\t\t\tp.sldM.style.cursor = 'default';\r\n\r\n\t\t\t// slider pointer inner and outer border\r\n\t\t\tp.sldPtrIB.style.border =\r\n\t\t\tp.sldPtrOB.style.border =\r\n\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\r\n\r\n\t\t\t// slider pointer outer border\r\n\t\t\tp.sldPtrOB.style.position = 'absolute';\r\n\t\t\tp.sldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\tp.sldPtrOB.style.top = '0';\r\n\r\n\t\t\t// slider pointer middle border\r\n\t\t\tp.sldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\r\n\r\n\t\t\t// slider pointer spacer\r\n\t\t\tp.sldPtrS.style.width = THIS.sliderSize + 'px';\r\n\t\t\tp.sldPtrS.style.height = sliderPtrSpace + 'px';\r\n\r\n\t\t\t// the Close button\r\n\t\t\tfunction setBtnBorder () {\r\n\t\t\t\tvar insetColors = THIS.insetColor.split(/\\s+/);\r\n\t\t\t\tvar outsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\r\n\t\t\t\tp.btn.style.borderColor = outsetColor;\r\n\t\t\t}\r\n\t\t\tp.btn.style.display = THIS.closable ? 'block' : 'none';\r\n\t\t\tp.btn.style.position = 'absolute';\r\n\t\t\tp.btn.style.left = THIS.padding + 'px';\r\n\t\t\tp.btn.style.bottom = THIS.padding + 'px';\r\n\t\t\tp.btn.style.padding = '0 15px';\r\n\t\t\tp.btn.style.height = THIS.buttonHeight + 'px';\r\n\t\t\tp.btn.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\tsetBtnBorder();\r\n\t\t\tp.btn.style.color = THIS.buttonColor;\r\n\t\t\tp.btn.style.font = '12px sans-serif';\r\n\t\t\tp.btn.style.textAlign = 'center';\r\n\t\t\ttry {\r\n\t\t\t\tp.btn.style.cursor = 'pointer';\r\n\t\t\t} catch(eOldIE) {\r\n\t\t\t\tp.btn.style.cursor = 'hand';\r\n\t\t\t}\r\n\t\t\tp.btn.onmousedown = function () {\r\n\t\t\t\tTHIS.hide();\r\n\t\t\t};\r\n\t\t\tp.btnT.style.lineHeight = THIS.buttonHeight + 'px';\r\n\t\t\tp.btnT.innerHTML = '';\r\n\t\t\tp.btnT.appendChild(document.createTextNode(THIS.closeText));\r\n\r\n\t\t\t// place pointers\r\n\t\t\tredrawPad();\r\n\t\t\tredrawSld();\r\n\r\n\t\t\t// If we are changing the owner without first closing the picker,\r\n\t\t\t// make sure to first deal with the old owner\r\n\t\t\tif (jsc.picker.owner && jsc.picker.owner !== THIS) {\r\n\t\t\t\tjsc.unsetClass(jsc.picker.owner.targetElement, THIS.activeClass);\r\n\t\t\t}\r\n\r\n\t\t\t// Set the new picker owner\r\n\t\t\tjsc.picker.owner = THIS;\r\n\r\n\t\t\t// The redrawPosition() method needs picker.owner to be set, that's why we call it here,\r\n\t\t\t// after setting the owner\r\n\t\t\tif (jsc.isElementType(container, 'body')) {\r\n\t\t\t\tjsc.redrawPosition();\r\n\t\t\t} else {\r\n\t\t\t\tjsc._drawPosition(THIS, 0, 0, 'relative', false);\r\n\t\t\t}\r\n\r\n\t\t\tif (p.wrap.parentNode != container) {\r\n\t\t\t\tcontainer.appendChild(p.wrap);\r\n\t\t\t}\r\n\r\n\t\t\tjsc.setClass(THIS.targetElement, THIS.activeClass);\r\n\t\t}\r\n\r\n\r\n\t\tfunction redrawPad () {\r\n\t\t\t// redraw the pad pointer\r\n\t\t\tswitch (jsc.getPadYComponent(THIS)) {\r\n\t\t\tcase 's': var yComponent = 1; break;\r\n\t\t\tcase 'v': var yComponent = 2; break;\r\n\t\t\t}\r\n\t\t\tvar x = Math.round((THIS.hsv[0] / 360) * (THIS.width - 1));\r\n\t\t\tvar y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\r\n\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\tvar ofs = -Math.floor(crossOuterSize / 2);\r\n\t\t\tjsc.picker.cross.style.left = (x + ofs) + 'px';\r\n\t\t\tjsc.picker.cross.style.top = (y + ofs) + 'px';\r\n\r\n\t\t\t// redraw the slider\r\n\t\t\tswitch (jsc.getSliderComponent(THIS)) {\r\n\t\t\tcase 's':\r\n\t\t\t\tvar rgb1 = HSV_RGB(THIS.hsv[0], 100, THIS.hsv[2]);\r\n\t\t\t\tvar rgb2 = HSV_RGB(THIS.hsv[0], 0, THIS.hsv[2]);\r\n\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb1[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb1[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb1[2]) + ')';\r\n\t\t\t\tvar color2 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb2[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb2[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb2[2]) + ')';\r\n\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'v':\r\n\t\t\t\tvar rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], 100);\r\n\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb[2]) + ')';\r\n\t\t\t\tvar color2 = '#000';\r\n\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction redrawSld () {\r\n\t\t\tvar sldComponent = jsc.getSliderComponent(THIS);\r\n\t\t\tif (sldComponent) {\r\n\t\t\t\t// redraw the slider pointer\r\n\t\t\t\tswitch (sldComponent) {\r\n\t\t\t\tcase 's': var yComponent = 1; break;\r\n\t\t\t\tcase 'v': var yComponent = 2; break;\r\n\t\t\t\t}\r\n\t\t\t\tvar y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\r\n\t\t\t\tjsc.picker.sldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(sliderPtrSpace / 2)) + 'px';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction isPickerOwner () {\r\n\t\t\treturn jsc.picker && jsc.picker.owner === THIS;\r\n\t\t}\r\n\r\n\r\n\t\tfunction blurValue () {\r\n\t\t\tTHIS.importColor();\r\n\t\t}\r\n\r\n\r\n\t\t// Find the target element\r\n\t\tif (typeof targetElement === 'string') {\r\n\t\t\tvar id = targetElement;\r\n\t\t\tvar elm = document.getElementById(id);\r\n\t\t\tif (elm) {\r\n\t\t\t\tthis.targetElement = elm;\r\n\t\t\t} else {\r\n\t\t\t\tjsc.warn('Could not find target element with ID \\'' + id + '\\'');\r\n\t\t\t}\r\n\t\t} else if (targetElement) {\r\n\t\t\tthis.targetElement = targetElement;\r\n\t\t} else {\r\n\t\t\tjsc.warn('Invalid target element: \\'' + targetElement + '\\'');\r\n\t\t}\r\n\r\n\t\tif (this.targetElement._jscLinkedInstance) {\r\n\t\t\tjsc.warn('Cannot link jscolor twice to the same element. Skipping.');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.targetElement._jscLinkedInstance = this;\r\n\r\n\t\t// Find the value element\r\n\t\tthis.valueElement = jsc.fetchElement(this.valueElement);\r\n\t\t// Find the style element\r\n\t\tthis.styleElement = jsc.fetchElement(this.styleElement);\r\n\r\n\t\tvar THIS = this;\r\n\t\tvar container =\r\n\t\t\tthis.container ?\r\n\t\t\tjsc.fetchElement(this.container) :\r\n\t\t\tdocument.getElementsByTagName('body')[0];\r\n\t\tvar sliderPtrSpace = 3; // px\r\n\r\n\t\t// For BUTTON elements it's important to stop them from sending the form when clicked\r\n\t\t// (e.g. in Safari)\r\n\t\tif (jsc.isElementType(this.targetElement, 'button')) {\r\n\t\t\tif (this.targetElement.onclick) {\r\n\t\t\t\tvar origCallback = this.targetElement.onclick;\r\n\t\t\t\tthis.targetElement.onclick = function (evt) {\r\n\t\t\t\t\torigCallback.call(this, evt);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tthis.targetElement.onclick = function () { return false; };\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tvar elm = this.targetElement;\r\n\t\tdo {\r\n\t\t\t// If the target element or one of its offsetParents has fixed position,\r\n\t\t\t// then use fixed positioning instead\r\n\t\t\t//\r\n\t\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\r\n\t\t\t// that's why we need to check if the returned style object is non-empty\r\n\t\t\tvar currStyle = jsc.getStyle(elm);\r\n\t\t\tif (currStyle && currStyle.position.toLowerCase() === 'fixed') {\r\n\t\t\t\tthis.fixed = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (elm !== this.targetElement) {\r\n\t\t\t\t// attach onParentScroll so that we can recompute the picker position\r\n\t\t\t\t// when one of the offsetParents is scrolled\r\n\t\t\t\tif (!elm._jscEventsAttached) {\r\n\t\t\t\t\tjsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\r\n\t\t\t\t\telm._jscEventsAttached = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} while ((elm = elm.offsetParent) && !jsc.isElementType(elm, 'body'));\r\n\t\t*/\r\n\r\n\t\t// valueElement\r\n\t\tif (this.valueElement) {\r\n\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\tvar updateField = function () {\r\n\t\t\t\t\tTHIS.fromString(THIS.valueElement.value, jsc.leaveValue);\r\n\t\t\t\t\tjsc.dispatchFineChange(THIS);\r\n\t\t\t\t};\r\n\t\t\t\tjsc.attachEvent(this.valueElement, 'keyup', updateField);\r\n\t\t\t\tjsc.attachEvent(this.valueElement, 'input', updateField);\r\n\t\t\t\tjsc.attachEvent(this.valueElement, 'blur', blurValue);\r\n\t\t\t\tthis.valueElement.setAttribute('autocomplete', 'off');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// styleElement\r\n\t\tif (this.styleElement) {\r\n\t\t\tthis.styleElement._jscOrigStyle = {\r\n\t\t\t\tbackgroundImage : this.styleElement.style.backgroundImage,\r\n\t\t\t\tbackgroundColor : this.styleElement.style.backgroundColor,\r\n\t\t\t\tcolor : this.styleElement.style.color\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (this.value) {\r\n\t\t\t// Try to set the color from the .value option and if unsuccessful,\r\n\t\t\t// export the current color\r\n\t\t\tthis.fromString(this.value) || this.exportColor();\r\n\t\t} else {\r\n\t\t\tthis.importColor();\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\n\r\n//================================\r\n// Public properties and methods\r\n//================================\r\n\r\n\r\n// By default, search for all elements with class=\"jscolor\" and install a color picker on them.\r\n//\r\n// You can change what class name will be looked for by setting the property jscolor.lookupClass\r\n// anywhere in your HTML document. To completely disable the automatic lookup, set it to null.\r\n//\r\njsc.jscolor.lookupClass = 'jscolor';\r\n\r\n\r\njsc.jscolor.installByClassName = function (className) {\r\n\tvar inputElms = document.getElementsByTagName('input');\r\n\tvar buttonElms = document.getElementsByTagName('button');\r\n\r\n\tjsc.tryInstallOnElements(inputElms, className);\r\n\tjsc.tryInstallOnElements(buttonElms, className);\r\n};\r\n\r\n\r\njsc.register();\r\n\r\n\r\nreturn jsc.jscolor;\r\n\r\n\r\n})(); }\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/jscolor.js","// const STARTER_COLORS =  { 2: [0, 0, 0], 10: [255, 0, 0],\n//                                           100: [0, 0, 255],\n//                                           250: [0, 255, 255],\n//                                           500: [255, 255, 255] };\n\nconst setColors = (max) => {\n  const newColorsObj = {};\n  let currentSum = 0;\n\n  const colorsList = document.getElementById('colors-list');\n  const colors = [].slice.call(colorsList.getElementsByTagName('li'));\n\n  while (currentSum < max) {\n    colors.forEach((color) => {\n      const incs = parseInt(color.innerHTML);\n\n      currentSum += incs;\n\n      const rgbStrings = color.style.backgroundColor.match(/[\\d]{1,3}/g);\n      const rgbInts = [];\n      rgbStrings.forEach((str, idx) => { rgbInts[idx] = parseInt(str); });\n\n      newColorsObj[currentSum] = rgbInts;\n    })\n  }\n\n  console.log(newColorsObj);\n  return newColorsObj;\n}\n\nexport default setColors;\n\n\n\n// WEBPACK FOOTER //\n// ./js/set_colors.js"],"sourceRoot":""}