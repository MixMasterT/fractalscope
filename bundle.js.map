{"version":3,"sources":["webpack:///webpack/bootstrap fd821d73a1364a357671","webpack:///./js/expand_mandlebrot.js","webpack:///./js/set_colors.js","webpack:///./js/color_picker.js","webpack:///./js/draw_grid.js","webpack:///./js/draw_mandlebrot.js","webpack:///./js/get_mandle_cache.js","webpack:///./js/jscolor.js","webpack:///./main.js"],"names":["expandMandlebrot","real","imaginary","max","incsCount","r","i","magnitude","Math","sqrt","newReal","setColors","maxIterations","_defaultColors","colorsList","document","getElementById","colors","childNodes","length","liData","slice","call","getElementsByTagName","forEach","liObj","push","parseInt","innerHTML","data","newColorsObj","currentSum","colorsArr","setupColorPicker","colorPicker","querySelector","addColorButton","createElement","appendChild","addColorForm","style","visibility","color","colorPickerButton","onclick","e","click","onsubmit","preventDefault","hexToRgb","hex","result","exec","width","rgb","value","newLi","backgroundColor","deleteButton","$","target","closest","remove","colorSum","Object","keys","darknessAvg","firstLi","insertBefore","handleAddColorClick","drawGrid","ctx","center","scale","clearRect","strokeStyle","moveTo","lineTo","stroke","font","fillStyle","p","fillText","toFixed","drawMandlebrot","canvas","mandleCache","colorsObj","getContext","height","imgData","getImageData","cutoffs","j","incsToEscape","floor","k","putImageData","getMandleCache","viewPort","centerR","centerI","x","y","window","jscolor","jsc","register","attachDOMReadyEvent","init","attachEvent","onDocumentMouseDown","onDocumentTouchStart","onWindowResize","lookupClass","installByClassName","tryInstallOnElements","elms","className","matchClass","RegExp","type","undefined","toLowerCase","isColorAttrSupported","m","match","targetElm","optsStr","dataOptions","getDataAttr","opts","Function","eParseError","warn","elm","setAttribute","isCanvasSupported","fetchElement","mixed","isElementType","nodeName","el","name","attrName","attrValue","getAttribute","evnt","func","addEventListener","detachEvent","removeEventListener","_attachedGroupEvents","attachGroupEvent","groupName","hasOwnProperty","detachGroupEvents","evt","fired","fireOnce","readyState","setTimeout","arguments","callee","documentElement","doScroll","top","tryScroll","body","msg","console","returnValue","captureTarget","setCapture","_capturedTarget","releaseTarget","releaseCapture","fireEvent","createEvent","ev","initEvent","dispatchEvent","createEventObject","classNameToList","replace","split","hasClass","indexOf","setClass","classList","unsetClass","repl","getStyle","getComputedStyle","currentStyle","setStyle","helper","getSupportedProp","names","props","borderRadius","boxShadow","prop","alphaOpacity","round","parseFloat","opacity","filter","setBorderRadius","setBoxShadow","getElementPos","relativeToViewport","rect","getBoundingClientRect","left","viewPos","getViewPos","getElementSize","offsetWidth","offsetHeight","getAbsPointerPos","event","changedTouches","clientX","clientY","getRelPointerPos","srcElement","targetRect","doc","pageXOffset","scrollLeft","clientLeft","pageYOffset","scrollTop","clientTop","getViewSize","innerWidth","clientWidth","innerHeight","clientHeight","redrawPosition","picker","owner","thisObj","tp","vp","fixed","targetElement","ts","vs","ps","getPickerOuterDims","a","b","c","position","l","smartPosition","pp","positionValue","contractShadow","_drawPosition","vShadow","shadowBlur","wrap","boxS","shadow","BoxShadow","shadowColor","getPickerDims","displaySlider","getSliderComponent","dims","insetWidth","padding","getPadToSliderPadding","sliderSize","closable","buttonHeight","borderWidth","pointerBorderWidth","pointerThickness","getPadYComponent","mode","charAt","_jscLinkedInstance","showOnClick","show","_jscControlName","onControlPointerStart","hide","onParentScroll","_pointerMoveEvent","mouse","touch","_pointerEndEvent","_pointerOrigin","controlName","pointerType","_jscInstance","registerDragEvents","offset","onDocumentPointerMove","onDocumentPointerEnd","parent","frameElement","ofs","abs","rel","hsv","fromHSV","setPad","setSld","dispatchFineChange","dispatchChange","valueElement","onFineChange","callback","ofsX","ofsY","pointerAbs","xVal","yVal","leaveSld","leavePad","_vmlNS","_vmlCSS","_vmlReady","initVML","namespaces","add","styleSheets","tags","ss","createStyleSheet","owningElement","id","addRule","createPalette","paletteObj","draw","drawFunc","hGrad","createLinearGradient","addColorStop","fillRect","vGrad","vmlContainer","overflow","method","angle","hRect","stroked","vRect","color2","createSliderGradient","sliderObj","color1","grad","leaveValue","leaveStyle","hShadow","blur","spread","inset","prototype","toString","vals","join","options","styleElement","required","refine","hash","uppercase","activeClass","minS","maxS","minV","maxV","crossSize","closeText","buttonColor","borderColor","insetColor","pointerColor","pointerBorderColor","zIndex","container","opt","isPickerOwner","detachPicker","drawPicker","redraw","importColor","exportColor","fromString","backgroundImage","_jscOrigStyle","test","flags","toUpperCase","isLight","redrawPad","redrawSld","h","s","v","isNaN","min","HSV_RGB","fromRGB","g","RGB_HSV","str","substr","params","re","mR","mG","mB","toHEXString","toRGBString","_processParentElementsInDOM","_linkedElementsProcessed","currStyle","_jscEventsAttached","parentNode","n","u","f","THIS","removeChild","box","boxB","pad","padB","padM","padPal","cross","crossBY","crossBX","crossLY","crossLX","sld","sldB","sldM","sldGrad","sldPtrS","sldPtrIB","sldPtrMB","sldPtrOB","btn","btnT","crossOuterSize","padToSliderPadding","PI","padCursor","clear","border","background","cursor","display","right","sliderPtrSpace","setBtnBorder","insetColors","outsetColor","bottom","textAlign","eOldIE","onmousedown","lineHeight","createTextNode","yComponent","rgb1","rgb2","sldComponent","blurValue","origCallback","updateField","inputElms","buttonElms","MAX_ITERATIONS","SLIDE_FACTOR","ZOOM_FACTOR","fractalCanvas","gridCanvas","clickCanvas","fractalCtx","gridCtx","currentColors","adjustViewPort","newR","newI","newScale","showGridButton","updateDisplay","currentZoomDisplay","onchange","zoomIn","zoomOut","slideLeft","slideRight","slideUp","slideDown","up","down","resetCenter","recenterButton","zoom","zoomBack","ondblclick","stopPropagation","clickX","clickY","onkeydown","keyCode","rotateColorsButton","rotationInterval","vizConfig","frameDurationFactor","collision_detect","color_loop","$Z","sprite","animate","colorRotations","viz","image_transition","setup","run","log","resize","children","newColors","colorKeys","currentColoredImage","image","create","colorRotationItem","setup_item","clearInterval","downloadButton","dataURL","toDataURL","href","infoModal","openModalButton","closeButton"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fd821d73a1364a357671","const expandMandlebrot = (real, imaginary, max) => {\n  let incsCount = 0;\n  let r = real;\n  let i = imaginary;\n  let magnitude = Math.sqrt(real * real + imaginary * imaginary);\n  let newReal = 0;\n  while(magnitude < 4.0) {\n    ++incsCount;\n    if(incsCount > max) { return -1; }\n    newReal = r * r - i * i + real;\n    i = r * i * 2 + imaginary;\n    r = newReal;\n    magnitude = Math.sqrt(r * r + i * i);\n  }\n  return incsCount;\n};\n\nexport default expandMandlebrot;\n\n\n\n// WEBPACK FOOTER //\n// ./js/expand_mandlebrot.js","const setColors = (maxIterations) => {\n\n  const _defaultColors = [\n    [1, [0,0,0]],  [1, [203, 151, 37]], [ 1, [0,0,0]],\n    [1, [229,184,46]], [1, [255, 255, 255]]\n  ]\n\n  const colorsList = document.getElementById('colors-list');\n\n  let colors = [];\n\n  if (colorsList.childNodes.length > 1) {\n\n    const liData = [].slice.call(colorsList.getElementsByTagName('li'));\n    liData.forEach((liObj) => {\n\n      colors.push( [parseInt(liObj.innerHTML), liObj.data] )\n    })\n\n  } else {\n    colors = _defaultColors;\n  }\n\n    const newColorsObj = {};\n    let currentSum = 0;\n\n    while (currentSum < maxIterations) {\n      colors.forEach((colorsArr) => {\n        currentSum += colorsArr[0];\n\n        newColorsObj[currentSum] = colorsArr[1];\n      })\n    }\n    return newColorsObj;\n  }\n\nexport default setColors;\n\n\n\n// WEBPACK FOOTER //\n// ./js/set_colors.js","import jscolor from './jscolor';\n\nimport setColors from './set_colors';\n\nconst setupColorPicker = () => {\n  const colorPicker = document.querySelector('.color-picker');\n\n  const addColorButton = document.createElement('BUTTON');\n  addColorButton.innerHTML = 'add color';\n\n  colorPicker.appendChild(addColorButton);\n\n  const addColorForm = document.getElementById('add-color');\n  addColorForm.style.visibility = 'hidden';\n\n  const colorsList = document.getElementById('colors-list');\n\n  const color = document.getElementById('color');\n\n  const colorPickerButton = document.getElementById('open-color-picker');\n  colorPickerButton.onclick = (e) => {\n    color.click();\n  }\n\n  addColorForm.onsubmit = (e) => {\n    e.preventDefault();\n\n    const hexToRgb = (hex) => {\n      var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n      return result ? [\n        parseInt(result[1], 16),\n        parseInt(result[2], 16),\n        parseInt(result[3], 16)\n      ] : null;\n    }\n\n    // this is 'width' of color band in iterations, not a pixel value\n    const width = document.getElementById('width');\n\n    const rgb = hexToRgb(color.value);\n\n    const newLi = document.createElement('li');\n    newLi.innerHTML = `${width.value} incs`;\n    newLi.style.backgroundColor = color.value;\n\n    newLi.data = rgb;\n\n    const deleteButton = document.createElement('DIV');\n    deleteButton.innerHTML = 'X';\n    deleteButton.onclick = (e) => {\n      $(e.target).closest('li').remove();\n    }\n\n    let colorSum = 0;\n    Object.keys(rgb).forEach((color) => { colorSum += rgb[color] })\n    const darknessAvg = colorSum / 3;\n\n    if(darknessAvg < 127) {\n      newLi.style.color = 'white';\n    }\n\n    newLi.appendChild(deleteButton);\n\n    //get first li in colorsList\n    const firstLi = colorsList.childNodes[0];\n\n    if(firstLi) {\n      colorsList.insertBefore(newLi, firstLi);\n    } else {\n      colorsList.appendChild(newLi);\n    }\n  };\n\n  const handleAddColorClick = () => {\n    if (addColorButton.innerHTML === 'add color') {\n      addColorForm.style.visibility = 'visible';\n      addColorButton.innerHTML = 'hide';\n    } else {\n      addColorForm.style.visibility = 'hidden';\n      addColorButton.innerHTML = 'add color';\n    }\n  }\n  addColorButton.onclick = handleAddColorClick;\n}\n\nexport default setupColorPicker;\n\n\n\n// WEBPACK FOOTER //\n// ./js/color_picker.js","const drawGrid = (ctx, center, scale) => {\n  // start by clearing the grid and setting the stroke style\n  ctx.clearRect(0,0,500,500);\n  ctx.strokeStyle = \"#888\";\n\n  //horizontal lines\n  ctx.moveTo(35, 125);\n  ctx.lineTo(500,125);\n  // ctx.stroke();\n\n  ctx.moveTo(35, 250);\n  ctx.lineTo(500,250);\n  // ctx.stroke();\n\n  ctx.moveTo(35, 375);\n  ctx.lineTo(500,375);\n  ctx.stroke();\n\n  //vertical lines\n  ctx.moveTo(125, 20);\n  ctx.lineTo(125, 500);\n  // ctx.stroke();\n\n  ctx.moveTo(250, 20);\n  ctx.lineTo(250, 500);\n  // ctx.stroke();\n\n  ctx.moveTo(375, 20);\n  ctx.lineTo(375, 500);\n  ctx.stroke();\n\n  // Add number marking\n  ctx.font = \"18px Scada Sans-serif\";\n  ctx.fillStyle = '#888';\n\n  //set numbers based on scale and center\n  const p = 2; // p for 'precision'\n\n  ctx.fillText(`${(center.i + scale/2).toFixed(p)}i`, 3, 125 );\n  ctx.fillText(`${(center.i).toFixed(p)}i`, 3, 250 );\n  ctx.fillText(`${(center.i - scale/2).toFixed(p)}i`, 3, 375 );\n  ctx.fillText(`${(center.r - scale/2).toFixed(p)}`, 110, 15 );\n  ctx.fillText(`${(center.r).toFixed(p)}`, 235, 15 );\n  ctx.fillText(`${(center.r + scale/2).toFixed(p)}`, 360, 15 );\n\n};\n\nexport default drawGrid;\n\n\n\n// WEBPACK FOOTER //\n// ./js/draw_grid.js","import expandMandlebrot from './expand_mandlebrot';\n\nconst drawMandlebrot = (canvas, mandleCache, colorsObj, max) => {\n  const ctx = canvas.getContext('2d');\n  const width = canvas.width;\n  const height = canvas.height;\n  const imgData = ctx.getImageData(0, 0, width, height);\n  const cutoffs = Object.keys(colorsObj);\n\n  // loop over pixels on canvas, mapping each pixel to a Complex numbers\n  // move by 4s because each pixel has 4 values for R, G, B and Alpha\n  for(let j = 0; j < imgData.data.length; j += 4) {\n    const incsToEscape = mandleCache[Math.floor(j / 4)]\n\n    for(let k = 0; k < cutoffs.length; k++) {\n      if (incsToEscape < cutoffs[k]) {\n        imgData.data[j] = colorsObj[cutoffs[k]][0];     //red channel\n        imgData.data[j + 1] = colorsObj[cutoffs[k]][1]; //green channel\n        imgData.data[j + 2] = colorsObj[cutoffs[k]][2]; //blue channel\n        imgData.data[j + 3] = 255;                      //alpha channel\n        break;\n      }\n    }\n  }\n  ctx.putImageData(imgData, 0, 0);\n};\n\nexport default drawMandlebrot;\n\n\n\n// WEBPACK FOOTER //\n// ./js/draw_mandlebrot.js","import expandMandlebrot from './expand_mandlebrot';\n\nconst getMandleCache = (canvas, viewPort, max) => {\n  const ctx = canvas.getContext(\"2d\");\n  const width = canvas.width;\n  const height = canvas.height;\n  const mandleCache = [];\n  const imgData = ctx.getImageData(0, 0, width, height);\n  const centerR = viewPort.center.r;\n  const centerI = viewPort.center.i;\n  const scale = viewPort.scale;\n\n  // loop over pixels on canvas, mapping each pixel to a Complex number\n  // return an array of increments to escape for each pixel in the image\n  // since the canvas if 500 * 500 pixels, this is array will have\n  // 250 000 values.\n\n  for (let j = 0; j < imgData.data.length; j += 4) {\n    const x = (j / 4) % width;\n    const y = ((j / 4) - x)/ width;\n\n    const r = (centerR - scale) + (x / width) * 2 * scale;\n    const i = (centerI + scale) - (y / width) * 2 * scale;\n\n    const incsToEscape = expandMandlebrot(r, i, max);\n\n    mandleCache.push(incsToEscape);\n  }\n  return mandleCache;\n}\n\n\nexport default getMandleCache;\n\n\n\n// WEBPACK FOOTER //\n// ./js/get_mandle_cache.js","/**\r\n * jscolor - JavaScript Color Picker\r\n *\r\n * @link    http://jscolor.com\r\n * @license For open source use: GPLv3\r\n *          For commercial use: JSColor Commercial License\r\n * @author  Jan Odvarko\r\n * @version 2.0.4\r\n *\r\n * See usage examples at http://jscolor.com/examples/\r\n */\r\n\r\n\r\n\"use strict\";\r\n\r\n\r\nif (!window.jscolor) { window.jscolor = (function () {\r\n\r\n\r\nvar jsc = {\r\n\r\n\r\n\tregister : function () {\r\n\t\tjsc.attachDOMReadyEvent(jsc.init);\r\n\t\tjsc.attachEvent(document, 'mousedown', jsc.onDocumentMouseDown);\r\n\t\tjsc.attachEvent(document, 'touchstart', jsc.onDocumentTouchStart);\r\n\t\tjsc.attachEvent(window, 'resize', jsc.onWindowResize);\r\n\t},\r\n\r\n\r\n\tinit : function () {\r\n\t\tif (jsc.jscolor.lookupClass) {\r\n\t\t\tjsc.jscolor.installByClassName(jsc.jscolor.lookupClass);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\ttryInstallOnElements : function (elms, className) {\r\n\t\tvar matchClass = new RegExp('(^|\\\\s)(' + className + ')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\r\n\r\n\t\tfor (var i = 0; i < elms.length; i += 1) {\r\n\t\t\tif (elms[i].type !== undefined && elms[i].type.toLowerCase() == 'color') {\r\n\t\t\t\tif (jsc.isColorAttrSupported) {\r\n\t\t\t\t\t// skip inputs of type 'color' if supported by the browser\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar m;\r\n\t\t\tif (!elms[i].jscolor && elms[i].className && (m = elms[i].className.match(matchClass))) {\r\n\t\t\t\tvar targetElm = elms[i];\r\n\t\t\t\tvar optsStr = null;\r\n\r\n\t\t\t\tvar dataOptions = jsc.getDataAttr(targetElm, 'jscolor');\r\n\t\t\t\tif (dataOptions !== null) {\r\n\t\t\t\t\toptsStr = dataOptions;\r\n\t\t\t\t} else if (m[4]) {\r\n\t\t\t\t\toptsStr = m[4];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar opts = {};\r\n\t\t\t\tif (optsStr) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\topts = (new Function ('return (' + optsStr + ')'))();\r\n\t\t\t\t\t} catch(eParseError) {\r\n\t\t\t\t\t\tjsc.warn('Error parsing jscolor options: ' + eParseError + ':\\n' + optsStr);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttargetElm.jscolor = new jsc.jscolor(targetElm, opts);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tisColorAttrSupported : (function () {\r\n\t\tvar elm = document.createElement('input');\r\n\t\tif (elm.setAttribute) {\r\n\t\t\telm.setAttribute('type', 'color');\r\n\t\t\tif (elm.type.toLowerCase() == 'color') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t})(),\r\n\r\n\r\n\tisCanvasSupported : (function () {\r\n\t\tvar elm = document.createElement('canvas');\r\n\t\treturn !!(elm.getContext && elm.getContext('2d'));\r\n\t})(),\r\n\r\n\r\n\tfetchElement : function (mixed) {\r\n\t\treturn typeof mixed === 'string' ? document.getElementById(mixed) : mixed;\r\n\t},\r\n\r\n\r\n\tisElementType : function (elm, type) {\r\n\t\treturn elm.nodeName.toLowerCase() === type.toLowerCase();\r\n\t},\r\n\r\n\r\n\tgetDataAttr : function (el, name) {\r\n\t\tvar attrName = 'data-' + name;\r\n\t\tvar attrValue = el.getAttribute(attrName);\r\n\t\tif (attrValue !== null) {\r\n\t\t\treturn attrValue;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\r\n\tattachEvent : function (el, evnt, func) {\r\n\t\tif (el.addEventListener) {\r\n\t\t\tel.addEventListener(evnt, func, false);\r\n\t\t} else if (el.attachEvent) {\r\n\t\t\tel.attachEvent('on' + evnt, func);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tdetachEvent : function (el, evnt, func) {\r\n\t\tif (el.removeEventListener) {\r\n\t\t\tel.removeEventListener(evnt, func, false);\r\n\t\t} else if (el.detachEvent) {\r\n\t\t\tel.detachEvent('on' + evnt, func);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_attachedGroupEvents : {},\r\n\r\n\r\n\tattachGroupEvent : function (groupName, el, evnt, func) {\r\n\t\tif (!jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\r\n\t\t\tjsc._attachedGroupEvents[groupName] = [];\r\n\t\t}\r\n\t\tjsc._attachedGroupEvents[groupName].push([el, evnt, func]);\r\n\t\tjsc.attachEvent(el, evnt, func);\r\n\t},\r\n\r\n\r\n\tdetachGroupEvents : function (groupName) {\r\n\t\tif (jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\r\n\t\t\tfor (var i = 0; i < jsc._attachedGroupEvents[groupName].length; i += 1) {\r\n\t\t\t\tvar evt = jsc._attachedGroupEvents[groupName][i];\r\n\t\t\t\tjsc.detachEvent(evt[0], evt[1], evt[2]);\r\n\t\t\t}\r\n\t\t\tdelete jsc._attachedGroupEvents[groupName];\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tattachDOMReadyEvent : function (func) {\r\n\t\tvar fired = false;\r\n\t\tvar fireOnce = function () {\r\n\t\t\tif (!fired) {\r\n\t\t\t\tfired = true;\r\n\t\t\t\tfunc();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (document.readyState === 'complete') {\r\n\t\t\tsetTimeout(fireOnce, 1); // async\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (document.addEventListener) {\r\n\t\t\tdocument.addEventListener('DOMContentLoaded', fireOnce, false);\r\n\r\n\t\t\t// Fallback\r\n\t\t\twindow.addEventListener('load', fireOnce, false);\r\n\r\n\t\t} else if (document.attachEvent) {\r\n\t\t\t// IE\r\n\t\t\tdocument.attachEvent('onreadystatechange', function () {\r\n\t\t\t\tif (document.readyState === 'complete') {\r\n\t\t\t\t\tdocument.detachEvent('onreadystatechange', arguments.callee);\r\n\t\t\t\t\tfireOnce();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// Fallback\r\n\t\t\twindow.attachEvent('onload', fireOnce);\r\n\r\n\t\t\t// IE7/8\r\n\t\t\tif (document.documentElement.doScroll && window == window.top) {\r\n\t\t\t\tvar tryScroll = function () {\r\n\t\t\t\t\tif (!document.body) { return; }\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdocument.documentElement.doScroll('left');\r\n\t\t\t\t\t\tfireOnce();\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tsetTimeout(tryScroll, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\ttryScroll();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\twarn : function (msg) {\r\n\t\tif (window.console && window.console.warn) {\r\n\t\t\twindow.console.warn(msg);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tpreventDefault : function (e) {\r\n\t\tif (e.preventDefault) { e.preventDefault(); }\r\n\t\te.returnValue = false;\r\n\t},\r\n\r\n\r\n\tcaptureTarget : function (target) {\r\n\t\t// IE\r\n\t\tif (target.setCapture) {\r\n\t\t\tjsc._capturedTarget = target;\r\n\t\t\tjsc._capturedTarget.setCapture();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\treleaseTarget : function () {\r\n\t\t// IE\r\n\t\tif (jsc._capturedTarget) {\r\n\t\t\tjsc._capturedTarget.releaseCapture();\r\n\t\t\tjsc._capturedTarget = null;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tfireEvent : function (el, evnt) {\r\n\t\tif (!el) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (document.createEvent) {\r\n\t\t\tvar ev = document.createEvent('HTMLEvents');\r\n\t\t\tev.initEvent(evnt, true, true);\r\n\t\t\tel.dispatchEvent(ev);\r\n\t\t} else if (document.createEventObject) {\r\n\t\t\tvar ev = document.createEventObject();\r\n\t\t\tel.fireEvent('on' + evnt, ev);\r\n\t\t} else if (el['on' + evnt]) { // alternatively use the traditional event model\r\n\t\t\tel['on' + evnt]();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tclassNameToList : function (className) {\r\n\t\treturn className.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can only contain a single class name\r\n\thasClass : function (elm, className) {\r\n\t\tif (!className) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn -1 != (' ' + elm.className.replace(/\\s+/g, ' ') + ' ').indexOf(' ' + className + ' ');\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\tsetClass : function (elm, className) {\r\n\t\tvar classList = jsc.classNameToList(className);\r\n\t\tfor (var i = 0; i < classList.length; i += 1) {\r\n\t\t\tif (!jsc.hasClass(elm, classList[i])) {\r\n\t\t\t\telm.className += (elm.className ? ' ' : '') + classList[i];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\tunsetClass : function (elm, className) {\r\n\t\tvar classList = jsc.classNameToList(className);\r\n\t\tfor (var i = 0; i < classList.length; i += 1) {\r\n\t\t\tvar repl = new RegExp(\r\n\t\t\t\t'^\\\\s*' + classList[i] + '\\\\s*|' +\r\n\t\t\t\t'\\\\s*' + classList[i] + '\\\\s*$|' +\r\n\t\t\t\t'\\\\s+' + classList[i] + '(\\\\s+)',\r\n\t\t\t\t'g'\r\n\t\t\t);\r\n\t\t\telm.className = elm.className.replace(repl, '$1');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tgetStyle : function (elm) {\r\n\t\treturn window.getComputedStyle ? window.getComputedStyle(elm) : elm.currentStyle;\r\n\t},\r\n\r\n\r\n\tsetStyle : (function () {\r\n\t\tvar helper = document.createElement('div');\r\n\t\tvar getSupportedProp = function (names) {\r\n\t\t\tfor (var i = 0; i < names.length; i += 1) {\r\n\t\t\t\tif (names[i] in helper.style) {\r\n\t\t\t\t\treturn names[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar props = {\r\n\t\t\tborderRadius: getSupportedProp(['borderRadius', 'MozBorderRadius', 'webkitBorderRadius']),\r\n\t\t\tboxShadow: getSupportedProp(['boxShadow', 'MozBoxShadow', 'webkitBoxShadow'])\r\n\t\t};\r\n\t\treturn function (elm, prop, value) {\r\n\t\t\tswitch (prop.toLowerCase()) {\r\n\t\t\tcase 'opacity':\r\n\t\t\t\tvar alphaOpacity = Math.round(parseFloat(value) * 100);\r\n\t\t\t\telm.style.opacity = value;\r\n\t\t\t\telm.style.filter = 'alpha(opacity=' + alphaOpacity + ')';\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\telm.style[props[prop]] = value;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t})(),\r\n\r\n\r\n\tsetBorderRadius : function (elm, value) {\r\n\t\tjsc.setStyle(elm, 'borderRadius', value || '0');\r\n\t},\r\n\r\n\r\n\tsetBoxShadow : function (elm, value) {\r\n\t\tjsc.setStyle(elm, 'boxShadow', value || 'none');\r\n\t},\r\n\r\n\r\n\tgetElementPos : function (e, relativeToViewport) {\r\n\t\tvar x=0, y=0;\r\n\t\tvar rect = e.getBoundingClientRect();\r\n\t\tx = rect.left;\r\n\t\ty = rect.top;\r\n\t\tif (!relativeToViewport) {\r\n\t\t\tvar viewPos = jsc.getViewPos();\r\n\t\t\tx += viewPos[0];\r\n\t\t\ty += viewPos[1];\r\n\t\t}\r\n\t\treturn [x, y];\r\n\t},\r\n\r\n\r\n\tgetElementSize : function (e) {\r\n\t\treturn [e.offsetWidth, e.offsetHeight];\r\n\t},\r\n\r\n\r\n\t// get pointer's X/Y coordinates relative to viewport\r\n\tgetAbsPointerPos : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar x = 0, y = 0;\r\n\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\r\n\t\t\t// touch devices\r\n\t\t\tx = e.changedTouches[0].clientX;\r\n\t\t\ty = e.changedTouches[0].clientY;\r\n\t\t} else if (typeof e.clientX === 'number') {\r\n\t\t\tx = e.clientX;\r\n\t\t\ty = e.clientY;\r\n\t\t}\r\n\t\treturn { x: x, y: y };\r\n\t},\r\n\r\n\r\n\t// get pointer's X/Y coordinates relative to target element\r\n\tgetRelPointerPos : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tvar targetRect = target.getBoundingClientRect();\r\n\r\n\t\tvar x = 0, y = 0;\r\n\r\n\t\tvar clientX = 0, clientY = 0;\r\n\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\r\n\t\t\t// touch devices\r\n\t\t\tclientX = e.changedTouches[0].clientX;\r\n\t\t\tclientY = e.changedTouches[0].clientY;\r\n\t\t} else if (typeof e.clientX === 'number') {\r\n\t\t\tclientX = e.clientX;\r\n\t\t\tclientY = e.clientY;\r\n\t\t}\r\n\r\n\t\tx = clientX - targetRect.left;\r\n\t\ty = clientY - targetRect.top;\r\n\t\treturn { x: x, y: y };\r\n\t},\r\n\r\n\r\n\tgetViewPos : function () {\r\n\t\tvar doc = document.documentElement;\r\n\t\treturn [\r\n\t\t\t(window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\r\n\t\t\t(window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n\t\t];\r\n\t},\r\n\r\n\r\n\tgetViewSize : function () {\r\n\t\tvar doc = document.documentElement;\r\n\t\treturn [\r\n\t\t\t(window.innerWidth || doc.clientWidth),\r\n\t\t\t(window.innerHeight || doc.clientHeight),\r\n\t\t];\r\n\t},\r\n\r\n\r\n\tredrawPosition : function () {\r\n\r\n\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\tvar thisObj = jsc.picker.owner;\r\n\r\n\t\t\tvar tp, vp;\r\n\r\n\t\t\tif (thisObj.fixed) {\r\n\t\t\t\t// Fixed elements are positioned relative to viewport,\r\n\t\t\t\t// therefore we can ignore the scroll offset\r\n\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement, true); // target pos\r\n\t\t\t\tvp = [0, 0]; // view pos\r\n\t\t\t} else {\r\n\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement); // target pos\r\n\t\t\t\tvp = jsc.getViewPos(); // view pos\r\n\t\t\t}\r\n\r\n\t\t\tvar ts = jsc.getElementSize(thisObj.targetElement); // target size\r\n\t\t\tvar vs = jsc.getViewSize(); // view size\r\n\t\t\tvar ps = jsc.getPickerOuterDims(thisObj); // picker size\r\n\t\t\tvar a, b, c;\r\n\t\t\tswitch (thisObj.position.toLowerCase()) {\r\n\t\t\t\tcase 'left': a=1; b=0; c=-1; break;\r\n\t\t\t\tcase 'right':a=1; b=0; c=1; break;\r\n\t\t\t\tcase 'top':  a=0; b=1; c=-1; break;\r\n\t\t\t\tdefault:     a=0; b=1; c=1; break;\r\n\t\t\t}\r\n\t\t\tvar l = (ts[b]+ps[b])/2;\r\n\r\n\t\t\t// compute picker position\r\n\t\t\tif (!thisObj.smartPosition) {\r\n\t\t\t\tvar pp = [\r\n\t\t\t\t\ttp[a],\r\n\t\t\t\t\ttp[b]+ts[b]-l+l*c\r\n\t\t\t\t];\r\n\t\t\t} else {\r\n\t\t\t\tvar pp = [\r\n\t\t\t\t\t-vp[a]+tp[a]+ps[a] > vs[a] ?\r\n\t\t\t\t\t\t(-vp[a]+tp[a]+ts[a]/2 > vs[a]/2 && tp[a]+ts[a]-ps[a] >= 0 ? tp[a]+ts[a]-ps[a] : tp[a]) :\r\n\t\t\t\t\t\ttp[a],\r\n\t\t\t\t\t-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c > vs[b] ?\r\n\t\t\t\t\t\t(-vp[b]+tp[b]+ts[b]/2 > vs[b]/2 && tp[b]+ts[b]-l-l*c >= 0 ? tp[b]+ts[b]-l-l*c : tp[b]+ts[b]-l+l*c) :\r\n\t\t\t\t\t\t(tp[b]+ts[b]-l+l*c >= 0 ? tp[b]+ts[b]-l+l*c : tp[b]+ts[b]-l-l*c)\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\t\t\tvar x = pp[a];\r\n\t\t\tvar y = pp[b];\r\n\t\t\tvar positionValue = thisObj.fixed ? 'fixed' : 'absolute';\r\n\t\t\tvar contractShadow =\r\n\t\t\t\t(pp[0] + ps[0] > tp[0] || pp[0] < tp[0] + ts[0]) &&\r\n\t\t\t\t(pp[1] + ps[1] < tp[1] + ts[1]);\r\n\r\n\t\t\tjsc._drawPosition(thisObj, x, y, positionValue, contractShadow);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_drawPosition : function (thisObj, x, y, positionValue, contractShadow) {\r\n\t\tvar vShadow = contractShadow ? 0 : thisObj.shadowBlur; // px\r\n\r\n\t\tjsc.picker.wrap.style.position = positionValue;\r\n\t\tjsc.picker.wrap.style.left = x + 'px';\r\n\t\tjsc.picker.wrap.style.top = y + 'px';\r\n\r\n\t\tjsc.setBoxShadow(\r\n\t\t\tjsc.picker.boxS,\r\n\t\t\tthisObj.shadow ?\r\n\t\t\t\tnew jsc.BoxShadow(0, vShadow, thisObj.shadowBlur, 0, thisObj.shadowColor) :\r\n\t\t\t\tnull);\r\n\t},\r\n\r\n\r\n\tgetPickerDims : function (thisObj) {\r\n\t\tvar displaySlider = !!jsc.getSliderComponent(thisObj);\r\n\t\tvar dims = [\r\n\t\t\t2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.width +\r\n\t\t\t\t(displaySlider ? 2 * thisObj.insetWidth + jsc.getPadToSliderPadding(thisObj) + thisObj.sliderSize : 0),\r\n\t\t\t2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.height +\r\n\t\t\t\t(thisObj.closable ? 2 * thisObj.insetWidth + thisObj.padding + thisObj.buttonHeight : 0)\r\n\t\t];\r\n\t\treturn dims;\r\n\t},\r\n\r\n\r\n\tgetPickerOuterDims : function (thisObj) {\r\n\t\tvar dims = jsc.getPickerDims(thisObj);\r\n\t\treturn [\r\n\t\t\tdims[0] + 2 * thisObj.borderWidth,\r\n\t\t\tdims[1] + 2 * thisObj.borderWidth\r\n\t\t];\r\n\t},\r\n\r\n\r\n\tgetPadToSliderPadding : function (thisObj) {\r\n\t\treturn Math.max(thisObj.padding, 1.5 * (2 * thisObj.pointerBorderWidth + thisObj.pointerThickness));\r\n\t},\r\n\r\n\r\n\tgetPadYComponent : function (thisObj) {\r\n\t\tswitch (thisObj.mode.charAt(1).toLowerCase()) {\r\n\t\t\tcase 'v': return 'v'; break;\r\n\t\t}\r\n\t\treturn 's';\r\n\t},\r\n\r\n\r\n\tgetSliderComponent : function (thisObj) {\r\n\t\tif (thisObj.mode.length > 2) {\r\n\t\t\tswitch (thisObj.mode.charAt(2).toLowerCase()) {\r\n\t\t\t\tcase 's': return 's'; break;\r\n\t\t\t\tcase 'v': return 'v'; break;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\r\n\tonDocumentMouseDown : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif (target._jscLinkedInstance) {\r\n\t\t\tif (target._jscLinkedInstance.showOnClick) {\r\n\t\t\t\ttarget._jscLinkedInstance.show();\r\n\t\t\t}\r\n\t\t} else if (target._jscControlName) {\r\n\t\t\tjsc.onControlPointerStart(e, target, target._jscControlName, 'mouse');\r\n\t\t} else {\r\n\t\t\t// Mouse is outside the picker controls -> hide the color picker!\r\n\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\tjsc.picker.owner.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonDocumentTouchStart : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif (target._jscLinkedInstance) {\r\n\t\t\tif (target._jscLinkedInstance.showOnClick) {\r\n\t\t\t\ttarget._jscLinkedInstance.show();\r\n\t\t\t}\r\n\t\t} else if (target._jscControlName) {\r\n\t\t\tjsc.onControlPointerStart(e, target, target._jscControlName, 'touch');\r\n\t\t} else {\r\n\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\tjsc.picker.owner.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonWindowResize : function (e) {\r\n\t\tjsc.redrawPosition();\r\n\t},\r\n\r\n\r\n\tonParentScroll : function (e) {\r\n\t\t// hide the picker when one of the parent elements is scrolled\r\n\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\tjsc.picker.owner.hide();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_pointerMoveEvent : {\r\n\t\tmouse: 'mousemove',\r\n\t\ttouch: 'touchmove'\r\n\t},\r\n\t_pointerEndEvent : {\r\n\t\tmouse: 'mouseup',\r\n\t\ttouch: 'touchend'\r\n\t},\r\n\r\n\r\n\t_pointerOrigin : null,\r\n\t_capturedTarget : null,\r\n\r\n\r\n\tonControlPointerStart : function (e, target, controlName, pointerType) {\r\n\t\tvar thisObj = target._jscInstance;\r\n\r\n\t\tjsc.preventDefault(e);\r\n\t\tjsc.captureTarget(target);\r\n\r\n\t\tvar registerDragEvents = function (doc, offset) {\r\n\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerMoveEvent[pointerType],\r\n\t\t\t\tjsc.onDocumentPointerMove(e, target, controlName, pointerType, offset));\r\n\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerEndEvent[pointerType],\r\n\t\t\t\tjsc.onDocumentPointerEnd(e, target, controlName, pointerType));\r\n\t\t};\r\n\r\n\t\tregisterDragEvents(document, [0, 0]);\r\n\r\n\t\tif (window.parent && window.frameElement) {\r\n\t\t\tvar rect = window.frameElement.getBoundingClientRect();\r\n\t\t\tvar ofs = [-rect.left, -rect.top];\r\n\t\t\tregisterDragEvents(window.parent.window.document, ofs);\r\n\t\t}\r\n\r\n\t\tvar abs = jsc.getAbsPointerPos(e);\r\n\t\tvar rel = jsc.getRelPointerPos(e);\r\n\t\tjsc._pointerOrigin = {\r\n\t\t\tx: abs.x - rel.x,\r\n\t\t\ty: abs.y - rel.y\r\n\t\t};\r\n\r\n\t\tswitch (controlName) {\r\n\t\tcase 'pad':\r\n\t\t\t// if the slider is at the bottom, move it up\r\n\t\t\tswitch (jsc.getSliderComponent(thisObj)) {\r\n\t\t\tcase 's': if (thisObj.hsv[1] === 0) { thisObj.fromHSV(null, 100, null); }; break;\r\n\t\t\tcase 'v': if (thisObj.hsv[2] === 0) { thisObj.fromHSV(null, null, 100); }; break;\r\n\t\t\t}\r\n\t\t\tjsc.setPad(thisObj, e, 0, 0);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'sld':\r\n\t\t\tjsc.setSld(thisObj, e, 0);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tjsc.dispatchFineChange(thisObj);\r\n\t},\r\n\r\n\r\n\tonDocumentPointerMove : function (e, target, controlName, pointerType, offset) {\r\n\t\treturn function (e) {\r\n\t\t\tvar thisObj = target._jscInstance;\r\n\t\t\tswitch (controlName) {\r\n\t\t\tcase 'pad':\r\n\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\tjsc.setPad(thisObj, e, offset[0], offset[1]);\r\n\t\t\t\tjsc.dispatchFineChange(thisObj);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'sld':\r\n\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\tjsc.setSld(thisObj, e, offset[1]);\r\n\t\t\t\tjsc.dispatchFineChange(thisObj);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonDocumentPointerEnd : function (e, target, controlName, pointerType) {\r\n\t\treturn function (e) {\r\n\t\t\tvar thisObj = target._jscInstance;\r\n\t\t\tjsc.detachGroupEvents('drag');\r\n\t\t\tjsc.releaseTarget();\r\n\t\t\t// Always dispatch changes after detaching outstanding mouse handlers,\r\n\t\t\t// in case some user interaction will occur in user's onchange callback\r\n\t\t\t// that would intrude with current mouse events\r\n\t\t\tjsc.dispatchChange(thisObj);\r\n\t\t};\r\n\t},\r\n\r\n\r\n\tdispatchChange : function (thisObj) {\r\n\t\tif (thisObj.valueElement) {\r\n\t\t\tif (jsc.isElementType(thisObj.valueElement, 'input')) {\r\n\t\t\t\tjsc.fireEvent(thisObj.valueElement, 'change');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tdispatchFineChange : function (thisObj) {\r\n\t\tif (thisObj.onFineChange) {\r\n\t\t\tvar callback;\r\n\t\t\tif (typeof thisObj.onFineChange === 'string') {\r\n\t\t\t\tcallback = new Function (thisObj.onFineChange);\r\n\t\t\t} else {\r\n\t\t\t\tcallback = thisObj.onFineChange;\r\n\t\t\t}\r\n\t\t\tcallback.call(thisObj);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tsetPad : function (thisObj, e, ofsX, ofsY) {\r\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\tvar x = ofsX + pointerAbs.x - jsc._pointerOrigin.x - thisObj.padding - thisObj.insetWidth;\r\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\r\n\r\n\t\tvar xVal = x * (360 / (thisObj.width - 1));\r\n\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\tswitch (jsc.getPadYComponent(thisObj)) {\r\n\t\tcase 's': thisObj.fromHSV(xVal, yVal, null, jsc.leaveSld); break;\r\n\t\tcase 'v': thisObj.fromHSV(xVal, null, yVal, jsc.leaveSld); break;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tsetSld : function (thisObj, e, ofsY) {\r\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\r\n\r\n\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\tswitch (jsc.getSliderComponent(thisObj)) {\r\n\t\tcase 's': thisObj.fromHSV(null, yVal, null, jsc.leavePad); break;\r\n\t\tcase 'v': thisObj.fromHSV(null, null, yVal, jsc.leavePad); break;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_vmlNS : 'jsc_vml_',\r\n\t_vmlCSS : 'jsc_vml_css_',\r\n\t_vmlReady : false,\r\n\r\n\r\n\tinitVML : function () {\r\n\t\tif (!jsc._vmlReady) {\r\n\t\t\t// init VML namespace\r\n\t\t\tvar doc = document;\r\n\t\t\tif (!doc.namespaces[jsc._vmlNS]) {\r\n\t\t\t\tdoc.namespaces.add(jsc._vmlNS, 'urn:schemas-microsoft-com:vml');\r\n\t\t\t}\r\n\t\t\tif (!doc.styleSheets[jsc._vmlCSS]) {\r\n\t\t\t\tvar tags = ['shape', 'shapetype', 'group', 'background', 'path', 'formulas', 'handles', 'fill', 'stroke', 'shadow', 'textbox', 'textpath', 'imagedata', 'line', 'polyline', 'curve', 'rect', 'roundrect', 'oval', 'arc', 'image'];\r\n\t\t\t\tvar ss = doc.createStyleSheet();\r\n\t\t\t\tss.owningElement.id = jsc._vmlCSS;\r\n\t\t\t\tfor (var i = 0; i < tags.length; i += 1) {\r\n\t\t\t\t\tss.addRule(jsc._vmlNS + '\\\\:' + tags[i], 'behavior:url(#default#VML);');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tjsc._vmlReady = true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tcreatePalette : function () {\r\n\r\n\t\tvar paletteObj = {\r\n\t\t\telm: null,\r\n\t\t\tdraw: null\r\n\t\t};\r\n\r\n\t\tif (jsc.isCanvasSupported) {\r\n\t\t\t// Canvas implementation for modern browsers\r\n\r\n\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\tvar drawFunc = function (width, height, type) {\r\n\t\t\t\tcanvas.width = width;\r\n\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tvar hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\r\n\t\t\t\thGrad.addColorStop(0 / 6, '#F00');\r\n\t\t\t\thGrad.addColorStop(1 / 6, '#FF0');\r\n\t\t\t\thGrad.addColorStop(2 / 6, '#0F0');\r\n\t\t\t\thGrad.addColorStop(3 / 6, '#0FF');\r\n\t\t\t\thGrad.addColorStop(4 / 6, '#00F');\r\n\t\t\t\thGrad.addColorStop(5 / 6, '#F0F');\r\n\t\t\t\thGrad.addColorStop(6 / 6, '#F00');\r\n\r\n\t\t\t\tctx.fillStyle = hGrad;\r\n\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tvar vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\tswitch (type.toLowerCase()) {\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\tvGrad.addColorStop(0, 'rgba(255,255,255,0)');\r\n\t\t\t\t\tvGrad.addColorStop(1, 'rgba(255,255,255,1)');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'v':\r\n\t\t\t\t\tvGrad.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\t\t\t\tvGrad.addColorStop(1, 'rgba(0,0,0,1)');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tctx.fillStyle = vGrad;\r\n\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t};\r\n\r\n\t\t\tpaletteObj.elm = canvas;\r\n\t\t\tpaletteObj.draw = drawFunc;\r\n\r\n\t\t} else {\r\n\t\t\t// VML fallback for IE 7 and 8\r\n\r\n\t\t\tjsc.initVML();\r\n\r\n\t\t\tvar vmlContainer = document.createElement('div');\r\n\t\t\tvmlContainer.style.position = 'relative';\r\n\t\t\tvmlContainer.style.overflow = 'hidden';\r\n\r\n\t\t\tvar hGrad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\thGrad.type = 'gradient';\r\n\t\t\thGrad.method = 'linear';\r\n\t\t\thGrad.angle = '90';\r\n\t\t\thGrad.colors = '16.67% #F0F, 33.33% #00F, 50% #0FF, 66.67% #0F0, 83.33% #FF0'\r\n\r\n\t\t\tvar hRect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\thRect.style.position = 'absolute';\r\n\t\t\thRect.style.left = -1 + 'px';\r\n\t\t\thRect.style.top = -1 + 'px';\r\n\t\t\thRect.stroked = false;\r\n\t\t\thRect.appendChild(hGrad);\r\n\t\t\tvmlContainer.appendChild(hRect);\r\n\r\n\t\t\tvar vGrad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\tvGrad.type = 'gradient';\r\n\t\t\tvGrad.method = 'linear';\r\n\t\t\tvGrad.angle = '180';\r\n\t\t\tvGrad.opacity = '0';\r\n\r\n\t\t\tvar vRect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\tvRect.style.position = 'absolute';\r\n\t\t\tvRect.style.left = -1 + 'px';\r\n\t\t\tvRect.style.top = -1 + 'px';\r\n\t\t\tvRect.stroked = false;\r\n\t\t\tvRect.appendChild(vGrad);\r\n\t\t\tvmlContainer.appendChild(vRect);\r\n\r\n\t\t\tvar drawFunc = function (width, height, type) {\r\n\t\t\t\tvmlContainer.style.width = width + 'px';\r\n\t\t\t\tvmlContainer.style.height = height + 'px';\r\n\r\n\t\t\t\thRect.style.width =\r\n\t\t\t\tvRect.style.width =\r\n\t\t\t\t\t(width + 1) + 'px';\r\n\t\t\t\thRect.style.height =\r\n\t\t\t\tvRect.style.height =\r\n\t\t\t\t\t(height + 1) + 'px';\r\n\r\n\t\t\t\t// Colors must be specified during every redraw, otherwise IE won't display\r\n\t\t\t\t// a full gradient during a subsequential redraw\r\n\t\t\t\thGrad.color = '#F00';\r\n\t\t\t\thGrad.color2 = '#F00';\r\n\r\n\t\t\t\tswitch (type.toLowerCase()) {\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\tvGrad.color = vGrad.color2 = '#FFF';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'v':\r\n\t\t\t\t\tvGrad.color = vGrad.color2 = '#000';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tpaletteObj.elm = vmlContainer;\r\n\t\t\tpaletteObj.draw = drawFunc;\r\n\t\t}\r\n\r\n\t\treturn paletteObj;\r\n\t},\r\n\r\n\r\n\tcreateSliderGradient : function () {\r\n\r\n\t\tvar sliderObj = {\r\n\t\t\telm: null,\r\n\t\t\tdraw: null\r\n\t\t};\r\n\r\n\t\tif (jsc.isCanvasSupported) {\r\n\t\t\t// Canvas implementation for modern browsers\r\n\r\n\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\tvar drawFunc = function (width, height, color1, color2) {\r\n\t\t\t\tcanvas.width = width;\r\n\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\tgrad.addColorStop(0, color1);\r\n\t\t\t\tgrad.addColorStop(1, color2);\r\n\r\n\t\t\t\tctx.fillStyle = grad;\r\n\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t};\r\n\r\n\t\t\tsliderObj.elm = canvas;\r\n\t\t\tsliderObj.draw = drawFunc;\r\n\r\n\t\t} else {\r\n\t\t\t// VML fallback for IE 7 and 8\r\n\r\n\t\t\tjsc.initVML();\r\n\r\n\t\t\tvar vmlContainer = document.createElement('div');\r\n\t\t\tvmlContainer.style.position = 'relative';\r\n\t\t\tvmlContainer.style.overflow = 'hidden';\r\n\r\n\t\t\tvar grad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\tgrad.type = 'gradient';\r\n\t\t\tgrad.method = 'linear';\r\n\t\t\tgrad.angle = '180';\r\n\r\n\t\t\tvar rect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\trect.style.position = 'absolute';\r\n\t\t\trect.style.left = -1 + 'px';\r\n\t\t\trect.style.top = -1 + 'px';\r\n\t\t\trect.stroked = false;\r\n\t\t\trect.appendChild(grad);\r\n\t\t\tvmlContainer.appendChild(rect);\r\n\r\n\t\t\tvar drawFunc = function (width, height, color1, color2) {\r\n\t\t\t\tvmlContainer.style.width = width + 'px';\r\n\t\t\t\tvmlContainer.style.height = height + 'px';\r\n\r\n\t\t\t\trect.style.width = (width + 1) + 'px';\r\n\t\t\t\trect.style.height = (height + 1) + 'px';\r\n\r\n\t\t\t\tgrad.color = color1;\r\n\t\t\t\tgrad.color2 = color2;\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tsliderObj.elm = vmlContainer;\r\n\t\t\tsliderObj.draw = drawFunc;\r\n\t\t}\r\n\r\n\t\treturn sliderObj;\r\n\t},\r\n\r\n\r\n\tleaveValue : 1<<0,\r\n\tleaveStyle : 1<<1,\r\n\tleavePad : 1<<2,\r\n\tleaveSld : 1<<3,\r\n\r\n\r\n\tBoxShadow : (function () {\r\n\t\tvar BoxShadow = function (hShadow, vShadow, blur, spread, color, inset) {\r\n\t\t\tthis.hShadow = hShadow;\r\n\t\t\tthis.vShadow = vShadow;\r\n\t\t\tthis.blur = blur;\r\n\t\t\tthis.spread = spread;\r\n\t\t\tthis.color = color;\r\n\t\t\tthis.inset = !!inset;\r\n\t\t};\r\n\r\n\t\tBoxShadow.prototype.toString = function () {\r\n\t\t\tvar vals = [\r\n\t\t\t\tMath.round(this.hShadow) + 'px',\r\n\t\t\t\tMath.round(this.vShadow) + 'px',\r\n\t\t\t\tMath.round(this.blur) + 'px',\r\n\t\t\t\tMath.round(this.spread) + 'px',\r\n\t\t\t\tthis.color\r\n\t\t\t];\r\n\t\t\tif (this.inset) {\r\n\t\t\t\tvals.push('inset');\r\n\t\t\t}\r\n\t\t\treturn vals.join(' ');\r\n\t\t};\r\n\r\n\t\treturn BoxShadow;\r\n\t})(),\r\n\r\n\r\n\t//\r\n\t// Usage:\r\n\t// var myColor = new jscolor(<targetElement> [, <options>])\r\n\t//\r\n\r\n\tjscolor : function (targetElement, options) {\r\n\r\n\t\t// General options\r\n\t\t//\r\n\t\tthis.value = null; // initial HEX color. To change it later, use methods fromString(), fromHSV() and fromRGB()\r\n\t\tthis.valueElement = targetElement; // element that will be used to display and input the color code\r\n\t\tthis.styleElement = targetElement; // element that will preview the picked color using CSS backgroundColor\r\n\t\tthis.required = true; // whether the associated text <input> can be left empty\r\n\t\tthis.refine = true; // whether to refine the entered color code (e.g. uppercase it and remove whitespace)\r\n\t\tthis.hash = false; // whether to prefix the HEX color code with # symbol\r\n\t\tthis.uppercase = true; // whether to uppercase the color code\r\n\t\tthis.onFineChange = null; // called instantly every time the color changes (value can be either a function or a string with javascript code)\r\n\t\tthis.activeClass = 'jscolor-active'; // class to be set to the target element when a picker window is open on it\r\n\t\tthis.minS = 0; // min allowed saturation (0 - 100)\r\n\t\tthis.maxS = 100; // max allowed saturation (0 - 100)\r\n\t\tthis.minV = 0; // min allowed value (brightness) (0 - 100)\r\n\t\tthis.maxV = 100; // max allowed value (brightness) (0 - 100)\r\n\r\n\t\t// Accessing the picked color\r\n\t\t//\r\n\t\tthis.hsv = [0, 0, 100]; // read-only  [0-360, 0-100, 0-100]\r\n\t\tthis.rgb = [255, 255, 255]; // read-only  [0-255, 0-255, 0-255]\r\n\r\n\t\t// Color Picker options\r\n\t\t//\r\n\t\tthis.width = 181; // width of color palette (in px)\r\n\t\tthis.height = 101; // height of color palette (in px)\r\n\t\tthis.showOnClick = true; // whether to display the color picker when user clicks on its target element\r\n\t\tthis.mode = 'HSV'; // HSV | HVS | HS | HV - layout of the color picker controls\r\n\t\tthis.position = 'bottom'; // left | right | top | bottom - position relative to the target element\r\n\t\tthis.smartPosition = true; // automatically change picker position when there is not enough space for it\r\n\t\tthis.sliderSize = 16; // px\r\n\t\tthis.crossSize = 8; // px\r\n\t\tthis.closable = false; // whether to display the Close button\r\n\t\tthis.closeText = 'Close';\r\n\t\tthis.buttonColor = '#000000'; // CSS color\r\n\t\tthis.buttonHeight = 18; // px\r\n\t\tthis.padding = 12; // px\r\n\t\tthis.backgroundColor = '#FFFFFF'; // CSS color\r\n\t\tthis.borderWidth = 1; // px\r\n\t\tthis.borderColor = '#BBBBBB'; // CSS color\r\n\t\tthis.borderRadius = 8; // px\r\n\t\tthis.insetWidth = 1; // px\r\n\t\tthis.insetColor = '#BBBBBB'; // CSS color\r\n\t\tthis.shadow = true; // whether to display shadow\r\n\t\tthis.shadowBlur = 15; // px\r\n\t\tthis.shadowColor = 'rgba(0,0,0,0.2)'; // CSS color\r\n\t\tthis.pointerColor = '#4C4C4C'; // px\r\n\t\tthis.pointerBorderColor = '#FFFFFF'; // px\r\n        this.pointerBorderWidth = 1; // px\r\n        this.pointerThickness = 2; // px\r\n\t\tthis.zIndex = 1000;\r\n\t\tthis.container = null; // where to append the color picker (BODY element by default)\r\n\r\n\r\n\t\tfor (var opt in options) {\r\n\t\t\tif (options.hasOwnProperty(opt)) {\r\n\t\t\t\tthis[opt] = options[opt];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.hide = function () {\r\n\t\t\tif (isPickerOwner()) {\r\n\t\t\t\tdetachPicker();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.show = function () {\r\n\t\t\tdrawPicker();\r\n\t\t};\r\n\r\n\r\n\t\tthis.redraw = function () {\r\n\t\t\tif (isPickerOwner()) {\r\n\t\t\t\tdrawPicker();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.importColor = function () {\r\n\t\t\tif (!this.valueElement) {\r\n\t\t\t\tthis.exportColor();\r\n\t\t\t} else {\r\n\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\t\tif (!this.refine) {\r\n\t\t\t\t\t\tif (!this.fromString(this.valueElement.value, jsc.leaveValue)) {\r\n\t\t\t\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.color = this.styleElement._jscOrigStyle.color;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.exportColor(jsc.leaveValue | jsc.leaveStyle);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (!this.required && /^\\s*$/.test(this.valueElement.value)) {\r\n\t\t\t\t\t\tthis.valueElement.value = '';\r\n\t\t\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\t\t\tthis.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\r\n\t\t\t\t\t\t\tthis.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\r\n\t\t\t\t\t\t\tthis.styleElement.style.color = this.styleElement._jscOrigStyle.color;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.exportColor(jsc.leaveValue | jsc.leaveStyle);\r\n\r\n\t\t\t\t\t} else if (this.fromString(this.valueElement.value)) {\r\n\t\t\t\t\t\t// managed to import color successfully from the value -> OK, don't do anything\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.exportColor();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// not an input element -> doesn't have any value\r\n\t\t\t\t\tthis.exportColor();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.exportColor = function (flags) {\r\n\t\t\tif (!(flags & jsc.leaveValue) && this.valueElement) {\r\n\t\t\t\tvar value = this.toString();\r\n\t\t\t\tif (this.uppercase) { value = value.toUpperCase(); }\r\n\t\t\t\tif (this.hash) { value = '#' + value; }\r\n\r\n\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\t\tthis.valueElement.value = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.valueElement.innerHTML = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!(flags & jsc.leaveStyle)) {\r\n\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\tthis.styleElement.style.backgroundImage = 'none';\r\n\t\t\t\t\tthis.styleElement.style.backgroundColor = '#' + this.toString();\r\n\t\t\t\t\tthis.styleElement.style.color = this.isLight() ? '#000' : '#FFF';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!(flags & jsc.leavePad) && isPickerOwner()) {\r\n\t\t\t\tredrawPad();\r\n\t\t\t}\r\n\t\t\tif (!(flags & jsc.leaveSld) && isPickerOwner()) {\r\n\t\t\t\tredrawSld();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\t// h: 0-360\r\n\t\t// s: 0-100\r\n\t\t// v: 0-100\r\n\t\t//\r\n\t\tthis.fromHSV = function (h, s, v, flags) { // null = don't change\r\n\t\t\tif (h !== null) {\r\n\t\t\t\tif (isNaN(h)) { return false; }\r\n\t\t\t\th = Math.max(0, Math.min(360, h));\r\n\t\t\t}\r\n\t\t\tif (s !== null) {\r\n\t\t\t\tif (isNaN(s)) { return false; }\r\n\t\t\t\ts = Math.max(0, Math.min(100, this.maxS, s), this.minS);\r\n\t\t\t}\r\n\t\t\tif (v !== null) {\r\n\t\t\t\tif (isNaN(v)) { return false; }\r\n\t\t\t\tv = Math.max(0, Math.min(100, this.maxV, v), this.minV);\r\n\t\t\t}\r\n\r\n\t\t\tthis.rgb = HSV_RGB(\r\n\t\t\t\th===null ? this.hsv[0] : (this.hsv[0]=h),\r\n\t\t\t\ts===null ? this.hsv[1] : (this.hsv[1]=s),\r\n\t\t\t\tv===null ? this.hsv[2] : (this.hsv[2]=v)\r\n\t\t\t);\r\n\r\n\t\t\tthis.exportColor(flags);\r\n\t\t};\r\n\r\n\r\n\t\t// r: 0-255\r\n\t\t// g: 0-255\r\n\t\t// b: 0-255\r\n\t\t//\r\n\t\tthis.fromRGB = function (r, g, b, flags) { // null = don't change\r\n\t\t\tif (r !== null) {\r\n\t\t\t\tif (isNaN(r)) { return false; }\r\n\t\t\t\tr = Math.max(0, Math.min(255, r));\r\n\t\t\t}\r\n\t\t\tif (g !== null) {\r\n\t\t\t\tif (isNaN(g)) { return false; }\r\n\t\t\t\tg = Math.max(0, Math.min(255, g));\r\n\t\t\t}\r\n\t\t\tif (b !== null) {\r\n\t\t\t\tif (isNaN(b)) { return false; }\r\n\t\t\t\tb = Math.max(0, Math.min(255, b));\r\n\t\t\t}\r\n\r\n\t\t\tvar hsv = RGB_HSV(\r\n\t\t\t\tr===null ? this.rgb[0] : r,\r\n\t\t\t\tg===null ? this.rgb[1] : g,\r\n\t\t\t\tb===null ? this.rgb[2] : b\r\n\t\t\t);\r\n\t\t\tif (hsv[0] !== null) {\r\n\t\t\t\tthis.hsv[0] = Math.max(0, Math.min(360, hsv[0]));\r\n\t\t\t}\r\n\t\t\tif (hsv[2] !== 0) {\r\n\t\t\t\tthis.hsv[1] = hsv[1]===null ? null : Math.max(0, this.minS, Math.min(100, this.maxS, hsv[1]));\r\n\t\t\t}\r\n\t\t\tthis.hsv[2] = hsv[2]===null ? null : Math.max(0, this.minV, Math.min(100, this.maxV, hsv[2]));\r\n\r\n\t\t\t// update RGB according to final HSV, as some values might be trimmed\r\n\t\t\tvar rgb = HSV_RGB(this.hsv[0], this.hsv[1], this.hsv[2]);\r\n\t\t\tthis.rgb[0] = rgb[0];\r\n\t\t\tthis.rgb[1] = rgb[1];\r\n\t\t\tthis.rgb[2] = rgb[2];\r\n\r\n\t\t\tthis.exportColor(flags);\r\n\t\t};\r\n\r\n\r\n\t\tthis.fromString = function (str, flags) {\r\n\t\t\tvar m;\r\n\t\t\tif (m = str.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i)) {\r\n\t\t\t\t// HEX notation\r\n\t\t\t\t//\r\n\r\n\t\t\t\tif (m[1].length === 6) {\r\n\t\t\t\t\t// 6-char notation\r\n\t\t\t\t\tthis.fromRGB(\r\n\t\t\t\t\t\tparseInt(m[1].substr(0,2),16),\r\n\t\t\t\t\t\tparseInt(m[1].substr(2,2),16),\r\n\t\t\t\t\t\tparseInt(m[1].substr(4,2),16),\r\n\t\t\t\t\t\tflags\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 3-char notation\r\n\t\t\t\t\tthis.fromRGB(\r\n\t\t\t\t\t\tparseInt(m[1].charAt(0) + m[1].charAt(0),16),\r\n\t\t\t\t\t\tparseInt(m[1].charAt(1) + m[1].charAt(1),16),\r\n\t\t\t\t\t\tparseInt(m[1].charAt(2) + m[1].charAt(2),16),\r\n\t\t\t\t\t\tflags\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t} else if (m = str.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i)) {\r\n\t\t\t\tvar params = m[1].split(',');\r\n\t\t\t\tvar re = /^\\s*(\\d*)(\\.\\d+)?\\s*$/;\r\n\t\t\t\tvar mR, mG, mB;\r\n\t\t\t\tif (\r\n\t\t\t\t\tparams.length >= 3 &&\r\n\t\t\t\t\t(mR = params[0].match(re)) &&\r\n\t\t\t\t\t(mG = params[1].match(re)) &&\r\n\t\t\t\t\t(mB = params[2].match(re))\r\n\t\t\t\t) {\r\n\t\t\t\t\tvar r = parseFloat((mR[1] || '0') + (mR[2] || ''));\r\n\t\t\t\t\tvar g = parseFloat((mG[1] || '0') + (mG[2] || ''));\r\n\t\t\t\t\tvar b = parseFloat((mB[1] || '0') + (mB[2] || ''));\r\n\t\t\t\t\tthis.fromRGB(r, g, b, flags);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\r\n\t\tthis.toString = function () {\r\n\t\t\treturn (\r\n\t\t\t\t(0x100 | Math.round(this.rgb[0])).toString(16).substr(1) +\r\n\t\t\t\t(0x100 | Math.round(this.rgb[1])).toString(16).substr(1) +\r\n\t\t\t\t(0x100 | Math.round(this.rgb[2])).toString(16).substr(1)\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis.toHEXString = function () {\r\n\t\t\treturn '#' + this.toString().toUpperCase();\r\n\t\t};\r\n\r\n\r\n\t\tthis.toRGBString = function () {\r\n\t\t\treturn ('rgb(' +\r\n\t\t\t\tMath.round(this.rgb[0]) + ',' +\r\n\t\t\t\tMath.round(this.rgb[1]) + ',' +\r\n\t\t\t\tMath.round(this.rgb[2]) + ')'\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis.isLight = function () {\r\n\t\t\treturn (\r\n\t\t\t\t0.213 * this.rgb[0] +\r\n\t\t\t\t0.715 * this.rgb[1] +\r\n\t\t\t\t0.072 * this.rgb[2] >\r\n\t\t\t\t255 / 2\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis._processParentElementsInDOM = function () {\r\n\t\t\tif (this._linkedElementsProcessed) { return; }\r\n\t\t\tthis._linkedElementsProcessed = true;\r\n\r\n\t\t\tvar elm = this.targetElement;\r\n\t\t\tdo {\r\n\t\t\t\t// If the target element or one of its parent nodes has fixed position,\r\n\t\t\t\t// then use fixed positioning instead\r\n\t\t\t\t//\r\n\t\t\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\r\n\t\t\t\t// that's why we need to check if the returned style object is non-empty\r\n\t\t\t\tvar currStyle = jsc.getStyle(elm);\r\n\t\t\t\tif (currStyle && currStyle.position.toLowerCase() === 'fixed') {\r\n\t\t\t\t\tthis.fixed = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (elm !== this.targetElement) {\r\n\t\t\t\t\t// Ensure to attach onParentScroll only once to each parent element\r\n\t\t\t\t\t// (multiple targetElements can share the same parent nodes)\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// Note: It's not just offsetParents that can be scrollable,\r\n\t\t\t\t\t// that's why we loop through all parent nodes\r\n\t\t\t\t\tif (!elm._jscEventsAttached) {\r\n\t\t\t\t\t\tjsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\r\n\t\t\t\t\t\telm._jscEventsAttached = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} while ((elm = elm.parentNode) && !jsc.isElementType(elm, 'body'));\r\n\t\t};\r\n\r\n\r\n\t\t// r: 0-255\r\n\t\t// g: 0-255\r\n\t\t// b: 0-255\r\n\t\t//\r\n\t\t// returns: [ 0-360, 0-100, 0-100 ]\r\n\t\t//\r\n\t\tfunction RGB_HSV (r, g, b) {\r\n\t\t\tr /= 255;\r\n\t\t\tg /= 255;\r\n\t\t\tb /= 255;\r\n\t\t\tvar n = Math.min(Math.min(r,g),b);\r\n\t\t\tvar v = Math.max(Math.max(r,g),b);\r\n\t\t\tvar m = v - n;\r\n\t\t\tif (m === 0) { return [ null, 0, 100 * v ]; }\r\n\t\t\tvar h = r===n ? 3+(b-g)/m : (g===n ? 5+(r-b)/m : 1+(g-r)/m);\r\n\t\t\treturn [\r\n\t\t\t\t60 * (h===6?0:h),\r\n\t\t\t\t100 * (m/v),\r\n\t\t\t\t100 * v\r\n\t\t\t];\r\n\t\t}\r\n\r\n\r\n\t\t// h: 0-360\r\n\t\t// s: 0-100\r\n\t\t// v: 0-100\r\n\t\t//\r\n\t\t// returns: [ 0-255, 0-255, 0-255 ]\r\n\t\t//\r\n\t\tfunction HSV_RGB (h, s, v) {\r\n\t\t\tvar u = 255 * (v / 100);\r\n\r\n\t\t\tif (h === null) {\r\n\t\t\t\treturn [ u, u, u ];\r\n\t\t\t}\r\n\r\n\t\t\th /= 60;\r\n\t\t\ts /= 100;\r\n\r\n\t\t\tvar i = Math.floor(h);\r\n\t\t\tvar f = i%2 ? h-i : 1-(h-i);\r\n\t\t\tvar m = u * (1 - s);\r\n\t\t\tvar n = u * (1 - s * f);\r\n\t\t\tswitch (i) {\r\n\t\t\t\tcase 6:\r\n\t\t\t\tcase 0: return [u,n,m];\r\n\t\t\t\tcase 1: return [n,u,m];\r\n\t\t\t\tcase 2: return [m,u,n];\r\n\t\t\t\tcase 3: return [m,n,u];\r\n\t\t\t\tcase 4: return [n,m,u];\r\n\t\t\t\tcase 5: return [u,m,n];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction detachPicker () {\r\n\t\t\tjsc.unsetClass(THIS.targetElement, THIS.activeClass);\r\n\t\t\tjsc.picker.wrap.parentNode.removeChild(jsc.picker.wrap);\r\n\t\t\tdelete jsc.picker.owner;\r\n\t\t}\r\n\r\n\r\n\t\tfunction drawPicker () {\r\n\r\n\t\t\t// At this point, when drawing the picker, we know what the parent elements are\r\n\t\t\t// and we can do all related DOM operations, such as registering events on them\r\n\t\t\t// or checking their positioning\r\n\t\t\tTHIS._processParentElementsInDOM();\r\n\r\n\t\t\tif (!jsc.picker) {\r\n\t\t\t\tjsc.picker = {\r\n\t\t\t\t\towner: null,\r\n\t\t\t\t\twrap : document.createElement('div'),\r\n\t\t\t\t\tbox : document.createElement('div'),\r\n\t\t\t\t\tboxS : document.createElement('div'), // shadow area\r\n\t\t\t\t\tboxB : document.createElement('div'), // border\r\n\t\t\t\t\tpad : document.createElement('div'),\r\n\t\t\t\t\tpadB : document.createElement('div'), // border\r\n\t\t\t\t\tpadM : document.createElement('div'), // mouse/touch area\r\n\t\t\t\t\tpadPal : jsc.createPalette(),\r\n\t\t\t\t\tcross : document.createElement('div'),\r\n\t\t\t\t\tcrossBY : document.createElement('div'), // border Y\r\n\t\t\t\t\tcrossBX : document.createElement('div'), // border X\r\n\t\t\t\t\tcrossLY : document.createElement('div'), // line Y\r\n\t\t\t\t\tcrossLX : document.createElement('div'), // line X\r\n\t\t\t\t\tsld : document.createElement('div'),\r\n\t\t\t\t\tsldB : document.createElement('div'), // border\r\n\t\t\t\t\tsldM : document.createElement('div'), // mouse/touch area\r\n\t\t\t\t\tsldGrad : jsc.createSliderGradient(),\r\n\t\t\t\t\tsldPtrS : document.createElement('div'), // slider pointer spacer\r\n\t\t\t\t\tsldPtrIB : document.createElement('div'), // slider pointer inner border\r\n\t\t\t\t\tsldPtrMB : document.createElement('div'), // slider pointer middle border\r\n\t\t\t\t\tsldPtrOB : document.createElement('div'), // slider pointer outer border\r\n\t\t\t\t\tbtn : document.createElement('div'),\r\n\t\t\t\t\tbtnT : document.createElement('span') // text\r\n\t\t\t\t};\r\n\r\n\t\t\t\tjsc.picker.pad.appendChild(jsc.picker.padPal.elm);\r\n\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.pad);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBY);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBX);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLY);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLX);\r\n\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.cross);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padB);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padM);\r\n\r\n\t\t\t\tjsc.picker.sld.appendChild(jsc.picker.sldGrad.elm);\r\n\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sld);\r\n\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sldPtrOB);\r\n\t\t\t\tjsc.picker.sldPtrOB.appendChild(jsc.picker.sldPtrMB);\r\n\t\t\t\tjsc.picker.sldPtrMB.appendChild(jsc.picker.sldPtrIB);\r\n\t\t\t\tjsc.picker.sldPtrIB.appendChild(jsc.picker.sldPtrS);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldB);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldM);\r\n\r\n\t\t\t\tjsc.picker.btn.appendChild(jsc.picker.btnT);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.btn);\r\n\r\n\t\t\t\tjsc.picker.boxB.appendChild(jsc.picker.box);\r\n\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxS);\r\n\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxB);\r\n\t\t\t}\r\n\r\n\t\t\tvar p = jsc.picker;\r\n\r\n\t\t\tvar displaySlider = !!jsc.getSliderComponent(THIS);\r\n\t\t\tvar dims = jsc.getPickerDims(THIS);\r\n\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\tvar padToSliderPadding = jsc.getPadToSliderPadding(THIS);\r\n\t\t\tvar borderRadius = Math.min(\r\n\t\t\t\tTHIS.borderRadius,\r\n\t\t\t\tMath.round(THIS.padding * Math.PI)); // px\r\n\t\t\tvar padCursor = 'crosshair';\r\n\r\n\t\t\t// wrap\r\n\t\t\tp.wrap.style.clear = 'both';\r\n\t\t\tp.wrap.style.width = (dims[0] + 2 * THIS.borderWidth) + 'px';\r\n\t\t\tp.wrap.style.height = (dims[1] + 2 * THIS.borderWidth) + 'px';\r\n\t\t\tp.wrap.style.zIndex = THIS.zIndex;\r\n\r\n\t\t\t// picker\r\n\t\t\tp.box.style.width = dims[0] + 'px';\r\n\t\t\tp.box.style.height = dims[1] + 'px';\r\n\r\n\t\t\tp.boxS.style.position = 'absolute';\r\n\t\t\tp.boxS.style.left = '0';\r\n\t\t\tp.boxS.style.top = '0';\r\n\t\t\tp.boxS.style.width = '100%';\r\n\t\t\tp.boxS.style.height = '100%';\r\n\t\t\tjsc.setBorderRadius(p.boxS, borderRadius + 'px');\r\n\r\n\t\t\t// picker border\r\n\t\t\tp.boxB.style.position = 'relative';\r\n\t\t\tp.boxB.style.border = THIS.borderWidth + 'px solid';\r\n\t\t\tp.boxB.style.borderColor = THIS.borderColor;\r\n\t\t\tp.boxB.style.background = THIS.backgroundColor;\r\n\t\t\tjsc.setBorderRadius(p.boxB, borderRadius + 'px');\r\n\r\n\t\t\t// IE hack:\r\n\t\t\t// If the element is transparent, IE will trigger the event on the elements under it,\r\n\t\t\t// e.g. on Canvas or on elements with border\r\n\t\t\tp.padM.style.background =\r\n\t\t\tp.sldM.style.background =\r\n\t\t\t\t'#FFF';\r\n\t\t\tjsc.setStyle(p.padM, 'opacity', '0');\r\n\t\t\tjsc.setStyle(p.sldM, 'opacity', '0');\r\n\r\n\t\t\t// pad\r\n\t\t\tp.pad.style.position = 'relative';\r\n\t\t\tp.pad.style.width = THIS.width + 'px';\r\n\t\t\tp.pad.style.height = THIS.height + 'px';\r\n\r\n\t\t\t// pad palettes (HSV and HVS)\r\n\t\t\tp.padPal.draw(THIS.width, THIS.height, jsc.getPadYComponent(THIS));\r\n\r\n\t\t\t// pad border\r\n\t\t\tp.padB.style.position = 'absolute';\r\n\t\t\tp.padB.style.left = THIS.padding + 'px';\r\n\t\t\tp.padB.style.top = THIS.padding + 'px';\r\n\t\t\tp.padB.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\tp.padB.style.borderColor = THIS.insetColor;\r\n\r\n\t\t\t// pad mouse area\r\n\t\t\tp.padM._jscInstance = THIS;\r\n\t\t\tp.padM._jscControlName = 'pad';\r\n\t\t\tp.padM.style.position = 'absolute';\r\n\t\t\tp.padM.style.left = '0';\r\n\t\t\tp.padM.style.top = '0';\r\n\t\t\tp.padM.style.width = (THIS.padding + 2 * THIS.insetWidth + THIS.width + padToSliderPadding / 2) + 'px';\r\n\t\t\tp.padM.style.height = dims[1] + 'px';\r\n\t\t\tp.padM.style.cursor = padCursor;\r\n\r\n\t\t\t// pad cross\r\n\t\t\tp.cross.style.position = 'absolute';\r\n\t\t\tp.cross.style.left =\r\n\t\t\tp.cross.style.top =\r\n\t\t\t\t'0';\r\n\t\t\tp.cross.style.width =\r\n\t\t\tp.cross.style.height =\r\n\t\t\t\tcrossOuterSize + 'px';\r\n\r\n\t\t\t// pad cross border Y and X\r\n\t\t\tp.crossBY.style.position =\r\n\t\t\tp.crossBX.style.position =\r\n\t\t\t\t'absolute';\r\n\t\t\tp.crossBY.style.background =\r\n\t\t\tp.crossBX.style.background =\r\n\t\t\t\tTHIS.pointerBorderColor;\r\n\t\t\tp.crossBY.style.width =\r\n\t\t\tp.crossBX.style.height =\r\n\t\t\t\t(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\tp.crossBY.style.height =\r\n\t\t\tp.crossBX.style.width =\r\n\t\t\t\tcrossOuterSize + 'px';\r\n\t\t\tp.crossBY.style.left =\r\n\t\t\tp.crossBX.style.top =\r\n\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) - THIS.pointerBorderWidth) + 'px';\r\n\t\t\tp.crossBY.style.top =\r\n\t\t\tp.crossBX.style.left =\r\n\t\t\t\t'0';\r\n\r\n\t\t\t// pad cross line Y and X\r\n\t\t\tp.crossLY.style.position =\r\n\t\t\tp.crossLX.style.position =\r\n\t\t\t\t'absolute';\r\n\t\t\tp.crossLY.style.background =\r\n\t\t\tp.crossLX.style.background =\r\n\t\t\t\tTHIS.pointerColor;\r\n\t\t\tp.crossLY.style.height =\r\n\t\t\tp.crossLX.style.width =\r\n\t\t\t\t(crossOuterSize - 2 * THIS.pointerBorderWidth) + 'px';\r\n\t\t\tp.crossLY.style.width =\r\n\t\t\tp.crossLX.style.height =\r\n\t\t\t\tTHIS.pointerThickness + 'px';\r\n\t\t\tp.crossLY.style.left =\r\n\t\t\tp.crossLX.style.top =\r\n\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2)) + 'px';\r\n\t\t\tp.crossLY.style.top =\r\n\t\t\tp.crossLX.style.left =\r\n\t\t\t\tTHIS.pointerBorderWidth + 'px';\r\n\r\n\t\t\t// slider\r\n\t\t\tp.sld.style.overflow = 'hidden';\r\n\t\t\tp.sld.style.width = THIS.sliderSize + 'px';\r\n\t\t\tp.sld.style.height = THIS.height + 'px';\r\n\r\n\t\t\t// slider gradient\r\n\t\t\tp.sldGrad.draw(THIS.sliderSize, THIS.height, '#000', '#000');\r\n\r\n\t\t\t// slider border\r\n\t\t\tp.sldB.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\tp.sldB.style.position = 'absolute';\r\n\t\t\tp.sldB.style.right = THIS.padding + 'px';\r\n\t\t\tp.sldB.style.top = THIS.padding + 'px';\r\n\t\t\tp.sldB.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\tp.sldB.style.borderColor = THIS.insetColor;\r\n\r\n\t\t\t// slider mouse area\r\n\t\t\tp.sldM._jscInstance = THIS;\r\n\t\t\tp.sldM._jscControlName = 'sld';\r\n\t\t\tp.sldM.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\tp.sldM.style.position = 'absolute';\r\n\t\t\tp.sldM.style.right = '0';\r\n\t\t\tp.sldM.style.top = '0';\r\n\t\t\tp.sldM.style.width = (THIS.sliderSize + padToSliderPadding / 2 + THIS.padding + 2 * THIS.insetWidth) + 'px';\r\n\t\t\tp.sldM.style.height = dims[1] + 'px';\r\n\t\t\tp.sldM.style.cursor = 'default';\r\n\r\n\t\t\t// slider pointer inner and outer border\r\n\t\t\tp.sldPtrIB.style.border =\r\n\t\t\tp.sldPtrOB.style.border =\r\n\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\r\n\r\n\t\t\t// slider pointer outer border\r\n\t\t\tp.sldPtrOB.style.position = 'absolute';\r\n\t\t\tp.sldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\tp.sldPtrOB.style.top = '0';\r\n\r\n\t\t\t// slider pointer middle border\r\n\t\t\tp.sldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\r\n\r\n\t\t\t// slider pointer spacer\r\n\t\t\tp.sldPtrS.style.width = THIS.sliderSize + 'px';\r\n\t\t\tp.sldPtrS.style.height = sliderPtrSpace + 'px';\r\n\r\n\t\t\t// the Close button\r\n\t\t\tfunction setBtnBorder () {\r\n\t\t\t\tvar insetColors = THIS.insetColor.split(/\\s+/);\r\n\t\t\t\tvar outsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\r\n\t\t\t\tp.btn.style.borderColor = outsetColor;\r\n\t\t\t}\r\n\t\t\tp.btn.style.display = THIS.closable ? 'block' : 'none';\r\n\t\t\tp.btn.style.position = 'absolute';\r\n\t\t\tp.btn.style.left = THIS.padding + 'px';\r\n\t\t\tp.btn.style.bottom = THIS.padding + 'px';\r\n\t\t\tp.btn.style.padding = '0 15px';\r\n\t\t\tp.btn.style.height = THIS.buttonHeight + 'px';\r\n\t\t\tp.btn.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\tsetBtnBorder();\r\n\t\t\tp.btn.style.color = THIS.buttonColor;\r\n\t\t\tp.btn.style.font = '12px sans-serif';\r\n\t\t\tp.btn.style.textAlign = 'center';\r\n\t\t\ttry {\r\n\t\t\t\tp.btn.style.cursor = 'pointer';\r\n\t\t\t} catch(eOldIE) {\r\n\t\t\t\tp.btn.style.cursor = 'hand';\r\n\t\t\t}\r\n\t\t\tp.btn.onmousedown = function () {\r\n\t\t\t\tTHIS.hide();\r\n\t\t\t};\r\n\t\t\tp.btnT.style.lineHeight = THIS.buttonHeight + 'px';\r\n\t\t\tp.btnT.innerHTML = '';\r\n\t\t\tp.btnT.appendChild(document.createTextNode(THIS.closeText));\r\n\r\n\t\t\t// place pointers\r\n\t\t\tredrawPad();\r\n\t\t\tredrawSld();\r\n\r\n\t\t\t// If we are changing the owner without first closing the picker,\r\n\t\t\t// make sure to first deal with the old owner\r\n\t\t\tif (jsc.picker.owner && jsc.picker.owner !== THIS) {\r\n\t\t\t\tjsc.unsetClass(jsc.picker.owner.targetElement, THIS.activeClass);\r\n\t\t\t}\r\n\r\n\t\t\t// Set the new picker owner\r\n\t\t\tjsc.picker.owner = THIS;\r\n\r\n\t\t\t// The redrawPosition() method needs picker.owner to be set, that's why we call it here,\r\n\t\t\t// after setting the owner\r\n\t\t\tif (jsc.isElementType(container, 'body')) {\r\n\t\t\t\tjsc.redrawPosition();\r\n\t\t\t} else {\r\n\t\t\t\tjsc._drawPosition(THIS, 0, 0, 'relative', false);\r\n\t\t\t}\r\n\r\n\t\t\tif (p.wrap.parentNode != container) {\r\n\t\t\t\tcontainer.appendChild(p.wrap);\r\n\t\t\t}\r\n\r\n\t\t\tjsc.setClass(THIS.targetElement, THIS.activeClass);\r\n\t\t}\r\n\r\n\r\n\t\tfunction redrawPad () {\r\n\t\t\t// redraw the pad pointer\r\n\t\t\tswitch (jsc.getPadYComponent(THIS)) {\r\n\t\t\tcase 's': var yComponent = 1; break;\r\n\t\t\tcase 'v': var yComponent = 2; break;\r\n\t\t\t}\r\n\t\t\tvar x = Math.round((THIS.hsv[0] / 360) * (THIS.width - 1));\r\n\t\t\tvar y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\r\n\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\tvar ofs = -Math.floor(crossOuterSize / 2);\r\n\t\t\tjsc.picker.cross.style.left = (x + ofs) + 'px';\r\n\t\t\tjsc.picker.cross.style.top = (y + ofs) + 'px';\r\n\r\n\t\t\t// redraw the slider\r\n\t\t\tswitch (jsc.getSliderComponent(THIS)) {\r\n\t\t\tcase 's':\r\n\t\t\t\tvar rgb1 = HSV_RGB(THIS.hsv[0], 100, THIS.hsv[2]);\r\n\t\t\t\tvar rgb2 = HSV_RGB(THIS.hsv[0], 0, THIS.hsv[2]);\r\n\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb1[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb1[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb1[2]) + ')';\r\n\t\t\t\tvar color2 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb2[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb2[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb2[2]) + ')';\r\n\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'v':\r\n\t\t\t\tvar rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], 100);\r\n\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb[2]) + ')';\r\n\t\t\t\tvar color2 = '#000';\r\n\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction redrawSld () {\r\n\t\t\tvar sldComponent = jsc.getSliderComponent(THIS);\r\n\t\t\tif (sldComponent) {\r\n\t\t\t\t// redraw the slider pointer\r\n\t\t\t\tswitch (sldComponent) {\r\n\t\t\t\tcase 's': var yComponent = 1; break;\r\n\t\t\t\tcase 'v': var yComponent = 2; break;\r\n\t\t\t\t}\r\n\t\t\t\tvar y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\r\n\t\t\t\tjsc.picker.sldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(sliderPtrSpace / 2)) + 'px';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction isPickerOwner () {\r\n\t\t\treturn jsc.picker && jsc.picker.owner === THIS;\r\n\t\t}\r\n\r\n\r\n\t\tfunction blurValue () {\r\n\t\t\tTHIS.importColor();\r\n\t\t}\r\n\r\n\r\n\t\t// Find the target element\r\n\t\tif (typeof targetElement === 'string') {\r\n\t\t\tvar id = targetElement;\r\n\t\t\tvar elm = document.getElementById(id);\r\n\t\t\tif (elm) {\r\n\t\t\t\tthis.targetElement = elm;\r\n\t\t\t} else {\r\n\t\t\t\tjsc.warn('Could not find target element with ID \\'' + id + '\\'');\r\n\t\t\t}\r\n\t\t} else if (targetElement) {\r\n\t\t\tthis.targetElement = targetElement;\r\n\t\t} else {\r\n\t\t\tjsc.warn('Invalid target element: \\'' + targetElement + '\\'');\r\n\t\t}\r\n\r\n\t\tif (this.targetElement._jscLinkedInstance) {\r\n\t\t\tjsc.warn('Cannot link jscolor twice to the same element. Skipping.');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.targetElement._jscLinkedInstance = this;\r\n\r\n\t\t// Find the value element\r\n\t\tthis.valueElement = jsc.fetchElement(this.valueElement);\r\n\t\t// Find the style element\r\n\t\tthis.styleElement = jsc.fetchElement(this.styleElement);\r\n\r\n\t\tvar THIS = this;\r\n\t\tvar container =\r\n\t\t\tthis.container ?\r\n\t\t\tjsc.fetchElement(this.container) :\r\n\t\t\tdocument.getElementsByTagName('body')[0];\r\n\t\tvar sliderPtrSpace = 3; // px\r\n\r\n\t\t// For BUTTON elements it's important to stop them from sending the form when clicked\r\n\t\t// (e.g. in Safari)\r\n\t\tif (jsc.isElementType(this.targetElement, 'button')) {\r\n\t\t\tif (this.targetElement.onclick) {\r\n\t\t\t\tvar origCallback = this.targetElement.onclick;\r\n\t\t\t\tthis.targetElement.onclick = function (evt) {\r\n\t\t\t\t\torigCallback.call(this, evt);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tthis.targetElement.onclick = function () { return false; };\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tvar elm = this.targetElement;\r\n\t\tdo {\r\n\t\t\t// If the target element or one of its offsetParents has fixed position,\r\n\t\t\t// then use fixed positioning instead\r\n\t\t\t//\r\n\t\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\r\n\t\t\t// that's why we need to check if the returned style object is non-empty\r\n\t\t\tvar currStyle = jsc.getStyle(elm);\r\n\t\t\tif (currStyle && currStyle.position.toLowerCase() === 'fixed') {\r\n\t\t\t\tthis.fixed = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (elm !== this.targetElement) {\r\n\t\t\t\t// attach onParentScroll so that we can recompute the picker position\r\n\t\t\t\t// when one of the offsetParents is scrolled\r\n\t\t\t\tif (!elm._jscEventsAttached) {\r\n\t\t\t\t\tjsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\r\n\t\t\t\t\telm._jscEventsAttached = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} while ((elm = elm.offsetParent) && !jsc.isElementType(elm, 'body'));\r\n\t\t*/\r\n\r\n\t\t// valueElement\r\n\t\tif (this.valueElement) {\r\n\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\tvar updateField = function () {\r\n\t\t\t\t\tTHIS.fromString(THIS.valueElement.value, jsc.leaveValue);\r\n\t\t\t\t\tjsc.dispatchFineChange(THIS);\r\n\t\t\t\t};\r\n\t\t\t\tjsc.attachEvent(this.valueElement, 'keyup', updateField);\r\n\t\t\t\tjsc.attachEvent(this.valueElement, 'input', updateField);\r\n\t\t\t\tjsc.attachEvent(this.valueElement, 'blur', blurValue);\r\n\t\t\t\tthis.valueElement.setAttribute('autocomplete', 'off');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// styleElement\r\n\t\tif (this.styleElement) {\r\n\t\t\tthis.styleElement._jscOrigStyle = {\r\n\t\t\t\tbackgroundImage : this.styleElement.style.backgroundImage,\r\n\t\t\t\tbackgroundColor : this.styleElement.style.backgroundColor,\r\n\t\t\t\tcolor : this.styleElement.style.color\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (this.value) {\r\n\t\t\t// Try to set the color from the .value option and if unsuccessful,\r\n\t\t\t// export the current color\r\n\t\t\tthis.fromString(this.value) || this.exportColor();\r\n\t\t} else {\r\n\t\t\tthis.importColor();\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\n\r\n//================================\r\n// Public properties and methods\r\n//================================\r\n\r\n\r\n// By default, search for all elements with class=\"jscolor\" and install a color picker on them.\r\n//\r\n// You can change what class name will be looked for by setting the property jscolor.lookupClass\r\n// anywhere in your HTML document. To completely disable the automatic lookup, set it to null.\r\n//\r\njsc.jscolor.lookupClass = 'jscolor';\r\n\r\n\r\njsc.jscolor.installByClassName = function (className) {\r\n\tvar inputElms = document.getElementsByTagName('input');\r\n\tvar buttonElms = document.getElementsByTagName('button');\r\n\r\n\tjsc.tryInstallOnElements(inputElms, className);\r\n\tjsc.tryInstallOnElements(buttonElms, className);\r\n};\r\n\r\n\r\njsc.register();\r\n\r\n\r\nreturn jsc.jscolor;\r\n\r\n\r\n})(); }\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/jscolor.js","import drawGrid from './js/draw_grid.js';\n\nimport expandMandlebrot from './js/expand_mandlebrot';\n\nimport drawMandlebrot from './js/draw_mandlebrot';\n\nimport setupColorPicker from './js/color_picker';\n\nimport setColors from './js/set_colors';\n\nimport getMandleCache from './js/get_mandle_cache';\n\nlet MAX_ITERATIONS = 500;\n\nconst SLIDE_FACTOR = (1 / 8);\n\nconst ZOOM_FACTOR = (3 / 2);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const fractalCanvas = document.getElementById('fractal');\n  const gridCanvas = document.getElementById('grid');\n  const clickCanvas = document.getElementById('click');\n\n  const fractalCtx = fractalCanvas.getContext(\"2d\");\n  const gridCtx = gridCanvas.getContext(\"2d\");\n\n  //set center\n  let centerR = 0;\n  let centerI = 0;\n\n  //set complex center\n  const center = {r: centerR, i: centerI};\n\n  //Set initial scale\n  let scale = 2;\n\n  //Set global viewPort variable\n  const viewPort = { center, scale }\n\n  //Create contained access to adjustments to the viewPort\n\n  let currentColors = setColors(MAX_ITERATIONS);\n\n  let mandleCache = getMandleCache(fractalCanvas, viewPort, MAX_ITERATIONS);\n\n  drawGrid(gridCtx, center, scale);\n  drawMandlebrot(fractalCanvas,\n                 mandleCache,\n                 currentColors,\n                 MAX_ITERATIONS);\n\n  const adjustViewPort = (newR, newI, newScale) => {\n    viewPort.center.r = newR,\n    viewPort.center.i = newI,\n    viewPort.scale = newScale\n\n    // recalculate mandleBrot calc cache Array\n    mandleCache = getMandleCache(fractalCanvas, viewPort, MAX_ITERATIONS);\n  }\n\n  //Button to Show  and hide Grid\n  const showGridButton = document.getElementById('grid-on-off');\n  showGridButton.onclick = () => {\n    if(showGridButton.innerHTML === 'hide grid') {\n      showGridButton.innerHTML = 'show grid';\n      gridCanvas.style.visibility = 'hidden';\n    } else {\n      showGridButton.innerHTML = 'hide grid';\n      drawGrid(gridCtx, center, scale);\n      gridCanvas.style.visibility = 'visible';\n    }\n  };\n\n  const colorsList = document.getElementById('colors-list');\n  colorsList.addEventListener('DOMSubtreeModified', (e) => {\n    currentColors = setColors(MAX_ITERATIONS);\n    updateDisplay();\n  });\n\n  const real = document.getElementById('real');\n  const imaginary = document.getElementById('imaginary');\n\n  const updateDisplay = () => {\n    real.innerHTML = viewPort.center.r.toFixed(3);\n    imaginary.innerHTML = `${viewPort.center.i.toFixed(3)}i`;\n    currentZoomDisplay.innerHTML = `${(2 / viewPort.scale).toFixed(1)} x`;\n    drawGrid(gridCtx, viewPort.center, viewPort.scale);\n    drawMandlebrot(fractalCanvas,\n                   mandleCache,\n                   currentColors,\n                   MAX_ITERATIONS);\n  };\n\n  const maxIterations = document.getElementById('max-iterations');\n  maxIterations.onchange = (e) => {\n    MAX_ITERATIONS = e.target.value;\n  };\n\n  const currentZoomDisplay = document.getElementById('magnification');\n\n  const zoomIn = () => {\n    adjustViewPort( viewPort.center.r,\n                    viewPort.center.i,\n                    viewPort.scale /= ZOOM_FACTOR)\n    updateDisplay();\n  };\n\n  const zoomOut = () => {\n    adjustViewPort( viewPort.center.r,\n                    viewPort.center.i,\n                    viewPort.scale *= ZOOM_FACTOR)\n    updateDisplay();\n  };\n\n  const slideLeft = () => {\n    adjustViewPort( viewPort.center.r -= SLIDE_FACTOR * viewPort.scale,\n                    viewPort.center.i,\n                    viewPort.scale )\n    updateDisplay();\n  };\n\n  const slideRight = () => {\n    adjustViewPort( viewPort.center.r += SLIDE_FACTOR * viewPort.scale,\n                    viewPort.center.i,\n                    viewPort.scale )\n    updateDisplay();\n  };\n\n  const slideUp = () => {\n    adjustViewPort( viewPort.center.r,\n                    viewPort.center.i -= SLIDE_FACTOR * viewPort.scale,\n                    viewPort.scale )\n    updateDisplay();\n  };\n\n  const slideDown = () => {\n    adjustViewPort( viewPort.center.r,\n                    viewPort.center.i += SLIDE_FACTOR * viewPort.scale,\n                    viewPort.scale );\n    updateDisplay();\n  };\n\n  const left = document.getElementById('slide-left');\n  left.onclick = slideLeft;\n\n  const right = document.getElementById('slide-right');\n  right.onclick = slideRight;\n\n  const up = document.getElementById('slide-up');\n  up.onclick = slideUp;\n\n  const down = document.getElementById('slide-down');\n  down.onclick = slideDown;\n\n  const resetCenter = () => {\n    adjustViewPort( 0, 0, 2);\n    updateDisplay();\n  }\n\n  const recenterButton = document.getElementById('recenter');\n  recenterButton.onclick = resetCenter;\n\n  setupColorPicker();\n\n  const zoom = document.getElementById('in');\n  zoom.onclick = zoomIn;\n\n  const zoomBack = document.getElementById('out');\n  zoomBack.onclick = zoomOut;\n\n  // Add listeners to #click canvas\n  //\n  // let isDown = false;\n  // let dragStartX;\n  // let dragStartY;\n  // let mouseX;\n  // let mouseY;\n  //\n  // clickCanvas.onmousedown = (e) => {\n  //   e.stopPropagation();\n  //   const rect = clickCanvas.getBoundingClientRect();\n  //   dragStartX = Math.floor(e.clientX - rect.left);\n  //   dragStartY = Math.floor(e.clientY - rect.top);\n  //   isDown = true;\n  //\n  //   mouseX = dragStartX;\n  //   mouseY = dragStartY;\n  // }\n  //\n  // clickCanvas.onmousemove = (e) => {\n  //   if (!isDown) {\n  //     return;\n  //   }\n  //   const rect = clickCanvas.getBoundingClientRect();\n  //   mouseX = Math.floor(e.clientX - rect.left);\n  //   mouseY = Math.floor(e.clientY - rect.top);\n  //\n  //   center.r = center.r + ((dragStartX - mouseX) / 500) * scale;\n  //   center.i = center.i + ((mouseY - dragStartY) / 500) * scale;\n  //\n  //   updateDisplay();\n  // }\n  //\n  // const handleRelease = (e) => {\n  //   const rect = clickCanvas.getBoundingClientRect();\n  //   const finishX = Math.floor(e.clientX - rect.left);\n  //   const finishY = Math.floor(e.clientY - rect.top);\n  //\n  //   center.r = center.r + ((dragStartX - finishX) / 500) * scale;\n  //   center.i = center.i + ((finishY - dragStartY) / 500) * scale;\n  //\n  //   updateDisplay();\n  //\n  //   isDown = false;\n  // }\n  //\n  // clickCanvas.onmouseup = handleRelease;\n  // clickCanvas.onmouseout = handleRelease;\n\n  clickCanvas.ondblclick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const rect = clickCanvas.getBoundingClientRect();\n    const clickX = Math.floor(e.clientX - rect.left);\n    const clickY = Math.floor(e.clientY - rect.top);\n\n    viewPort.center.r = (viewPort.center.r - viewPort.scale) +\n                          (clickX / 500) * 2 * viewPort.scale;\n    viewPort.center.i = (viewPort.center.i + viewPort.scale) -\n                          (clickY / 500) * 2 * viewPort.scale;\n    zoomIn();\n  }\n\n  // Key binding for slide and zoom actions\n  document.onkeydown= (e) => {\n    e.preventDefault();\n    switch (e.keyCode) {\n      case 39:\n        slideLeft();\n        break;\n      case 38:\n        slideUp();\n        break;\n      case 37:\n        slideRight();\n        break;\n      case 40:\n        slideDown();\n        break;\n      case 90:\n        zoomIn();\n        break;\n      case 88:\n        zoomOut();\n        break;\n      case 82:\n        resetCenter();\n        break;\n    }\n    updateDisplay();\n  };\n\n  const rotateColorsButton = document.getElementById('rotate-colors');\n\n  let rotationInterval;\n\n  var vizConfig = {\n    frameDurationFactor: 4,\n    width:  fractalCanvas.width,\n    height: fractalCanvas.height,\n    collision_detect: function() {},\n    // resize: function() {},\n  };\n\n\n  rotateColorsButton.onclick = (e) => {\n    if (rotateColorsButton.innerHTML === 'Rotate Colors') {\n      rotateColorsButton.innerHTML = 'Stop Rotation';\n\n      const colorRotations = [];\n\n      const viz = $Z.helper.viz.setup(vizConfig);\n      viz.run() ;\n\n      // viz.resize = function() { return; }\n\n      console.log(viz.resize);\n\n      for (let k = 0; k < colorsList.children.length; k++) {\n        const newColors = {};\n        const colorKeys = Object.keys(currentColors);\n\n        if (colorsList.childNodes.length === 3) {\n          // extra fixed value necessary to avoid strange harmonic effect\n          // at 3 colors, whereby colors only change once every 500 rotations\n\n          // keep old color for points inside the set\n          newColors[colorKeys[0]] = currentColors[colorKeys[0]];\n\n          //keep old color for fastest escaping points at first and second\n          //color band\n          newColors[colorKeys[1]] = currentColors[colorKeys[1]];\n          newColors[colorKeys[2]] = currentColors[colorKeys[2]];\n\n          //rotate all colors higher than two\n          for (let i = 3; i < colorKeys.length; i++) {\n            newColors[colorKeys[i]] = currentColors[colorKeys[ 3 + ((i + 1) % (colorKeys.length - 3))]];\n          }\n        } else {\n          // keep old color for points inside the set\n          newColors[colorKeys[0]] = currentColors[colorKeys[0]];\n\n          //keep old color for fastest escaping points\n          newColors[colorKeys[1]] = currentColors[colorKeys[1]];\n          // newColors[colorKeys[2]] = currentColors[colorKeys[2]];\n\n          //rotate all colors higher than two\n          for (let i = 2; i < colorKeys.length; i++) {\n            newColors[colorKeys[i]] = currentColors[colorKeys[ 2 + ((i + 1) % (colorKeys.length - 2))]];\n          }\n        }\n        const currentColoredImage = $Z.helper.image.create(fractalCanvas.width, fractalCanvas.height);\n        drawMandlebrot(currentColoredImage, mandleCache, newColors, MAX_ITERATIONS);\n        colorRotations.push(currentColoredImage);\n        currentColors = newColors;\n      }\n\n\n      const colorRotationItem = viz.setup_item({\n\n        image: colorRotations[0],\n        x: 0,\n        y: 0,\n        opacity: 1,\n\n      }) ;\n\n      function color_loop() {\n        return $Z.helper.sprite.animate(\n                                          colorRotations,\n                                          viz.image_transition\n                                        ) ;\n      }\n      // var colorLoop = $Z.helper.sprite.animate(\n      //                                           colorRotations,\n      //                                           viz.image_transition\n      //                                         ) ;\n\n      // colorRotationItem.add_transition( colorLoop ) ;\n\n      // colorRotationItem.loop(color_loop);\n\n\n\n      // rotationInterval = setInterval(() => {\n      //   const colorKeys = Object.keys(currentColors);\n      //   const newColors = {};\n      //\n      //   if (colorsList.childNodes.length === 3) {\n      //     // extra fixed value necessary to avoid strange harmonic effect\n      //     // at 3 colors, whereby colors only change once every 500 rotations\n      //\n      //     // keep old color for points inside the set\n      //     newColors[colorKeys[0]] = currentColors[colorKeys[0]];\n      //\n      //     //keep old color for fastest escaping points at first and second\n      //     //color band\n      //     newColors[colorKeys[1]] = currentColors[colorKeys[1]];\n      //     newColors[colorKeys[2]] = currentColors[colorKeys[2]];\n      //\n      //     //rotate all colors higher than two\n      //     for (let i = 3; i < colorKeys.length; i++) {\n      //       newColors[colorKeys[i]] = currentColors[colorKeys[ 3 + ((i + 1) % (colorKeys.length - 3))]];\n      //     }\n      //   } else {\n      //     // keep old color for points inside the set\n      //     newColors[colorKeys[0]] = currentColors[colorKeys[0]];\n      //\n      //     //keep old color for fastest escaping points\n      //     newColors[colorKeys[1]] = currentColors[colorKeys[1]];\n      //     // newColors[colorKeys[2]] = currentColors[colorKeys[2]];\n      //\n      //     //rotate all colors higher than two\n      //     for (let i = 2; i < colorKeys.length; i++) {\n      //       newColors[colorKeys[i]] = currentColors[colorKeys[ 2 + ((i + 1) % (colorKeys.length - 2))]];\n      //     }\n      //   }\n      //   currentColors = newColors;\n      //   updateDisplay();\n      // }, 50);\n    } else {\n      rotateColorsButton.innerHTML = 'Rotate Colors';\n      clearInterval(rotationInterval);\n    }\n  }\n\n  const downloadButton = document.getElementById('download');\n  downloadButton.addEventListener('click', (e) => {\n    var dataURL = fractalCanvas.toDataURL('image/png');\n    downloadButton.href = dataURL;\n  });\n\n  const infoModal = document.getElementById('info');\n\n  const openModalButton = document.getElementById(\"info-modal\");\n\n  // Get the element that closes the modal\n  const closeButton = document.getElementById(\"close\");\n\n  // When the user clicks on the button, open the modal\n  openModalButton.onclick = function() {\n      infoModal.style.display = \"block\";\n  }\n\n  // close the infoModal\n  closeButton.onclick = function() {\n      infoModal.style.display = \"none\";\n  }\n\n  // When the user clicks outside of the infoModal, close it\n  window.onclick = function(event) {\n      if (event.target == infoModal) {\n          infoModal.style.display = \"none\";\n      }\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./main.js"],"sourceRoot":""}